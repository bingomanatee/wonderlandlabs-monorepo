// Action function with access to store methods
store.transact({
  action(value) {
    // 'this' refers to the store instance
    // 'value' is the current store value
    
    // Call other actions using this.$
    this.$.updateUser(value.userId, newData)
    this.$.logActivity('user updated')
    
    // Direct state updates using this.next()
    this.next({ ...value, lastUpdated: Date.now() })
    
    // Access store properties
    console.log('Store name:', this.name)
  }
})
