import{d as me,j as e,u as Ae,B as d,C as te,F as mt,H as q,L as re,I as en,T as l,M as Hn,e as qn,f as Ie,g as Gn,h as Jn,i as tn,k as nn,l as $e,m as rn,n as Ee,o as O,p as sn,q as on,V as w,r as p,S as pe,D as He,s as ye,t as K,v as x,w as v,x as Kn,y as Yn,z as Xn,A as ie,E as Te,G as Qn,J as _,K as S,N as er,O as tr,P as le,Q as de,U as nr,R as rr,W as sr}from"./chakra-CNIT8v1B.js";import{e as ir,g as an,b as he,a as ce,u as or,L as R,c as At,f as ar,h as ee,B as cr}from"./vendor-BYoL5dE3.js";import{F as lr,S as dr}from"./forestry-wyfrQRLO.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Ve={},kt;function ur(){if(kt)return Ve;kt=1;var t=ir();return Ve.createRoot=t.createRoot,Ve.hydrateRoot=t.hydrateRoot,Ve}var hr=ur();const pr=an(hr),mr=me({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),gr=me({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"}),T=me({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}),fr=me({d:"M19.5,9.5h-.75V6.75a6.75,6.75,0,0,0-13.5,0V9.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5ZM7.75,6.75a4.25,4.25,0,0,1,8.5,0V9a.5.5,0,0,1-.5.5H8.25a.5.5,0,0,1-.5-.5Z",displayName:"LockIcon"}),xr=me({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),jr=me({displayName:"ExternalLinkIcon",path:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[e.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.jsx("path",{d:"M15 3h6v6"}),e.jsx("path",{d:"M10 14L21 3"})]})}),be=me({d:"M23.555,8.729a1.505,1.505,0,0,0-1.406-.98H16.062a.5.5,0,0,1-.472-.334L13.405,1.222a1.5,1.5,0,0,0-2.81,0l-.005.016L8.41,7.415a.5.5,0,0,1-.471.334H1.85A1.5,1.5,0,0,0,.887,10.4l5.184,4.3a.5.5,0,0,1,.155.543L4.048,21.774a1.5,1.5,0,0,0,2.31,1.684l5.346-3.92a.5.5,0,0,1,.591,0l5.344,3.919a1.5,1.5,0,0,0,2.312-1.683l-2.178-6.535a.5.5,0,0,1,.155-.543l5.194-4.306A1.5,1.5,0,0,0,23.555,8.729Z",displayName:"StarIcon"}),it=me({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),L=me({viewBox:"0 0 14 14",path:e.jsx("g",{fill:"currentColor",children:e.jsx("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})});var cn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ft=he.createContext&&he.createContext(cn),yr=["attr","size","title"];function br(t,n){if(t==null)return{};var r=vr(t,n),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)s=o[i],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function vr(t,n){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(n.indexOf(s)>=0)continue;r[s]=t[s]}return r}function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},qe.apply(this,arguments)}function Ct(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Ge(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ct(Object(r),!0).forEach(function(s){wr(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function wr(t,n,r){return n=Sr(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Sr(t){var n=zr(t,"string");return typeof n=="symbol"?n:n+""}function zr(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function ln(t){return t&&t.map((n,r)=>he.createElement(n.tag,Ge({key:r},n.attr),ln(n.child)))}function _r(t){return n=>he.createElement(Ar,qe({attr:Ge({},t.attr)},n),ln(t.child))}function Ar(t){var n=r=>{var{attr:s,size:i,title:o}=t,a=br(t,yr),c=i||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),he.createElement("svg",qe({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,a,{className:u,style:Ge(Ge({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&he.createElement("title",null,o),t.children)};return Ft!==void 0?he.createElement(Ft.Consumer,null,r=>n(r)):n(cn)}function kr(t){return _r({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function dn(t,...n){const r=ce.useRef(null);r.current||=t(...n);const[s,i]=ce.useState(r.current?.value);return ce.useEffect(()=>{if(r.current){let o=r.current?.subscribe(i);return()=>{o?.unsubscribe()}}},[]),[s,r.current]}class Fr extends lr{constructor(){super({name:"navigation",value:{openMenu:null,hoveredMenu:null}})}openMenu(n){this.mutate(r=>{r.openMenu=n,r.hoveredMenu=n})}closeMenu(){this.mutate(n=>{n.openMenu=null,n.hoveredMenu=null})}setHoveredMenu(n){this.mutate(r=>{r.hoveredMenu=n,value.openMenu&&n&&n!==value.openMenu&&(r.openMenu=n)})}handleMenuEnter(n){this.mutate(r=>{r.hoveredMenu=n,r.openMenu=n})}handleMenuLeave(){this.mutate(n=>{n.hoveredMenu=null,n.openMenu=null})}handleItemClick(){this.mutate(n=>{n.openMenu=null,n.hoveredMenu=null})}}const Cr=()=>new Fr,Tr={"Getting Started":[{label:"Quick Start",path:"/"},{label:"Why Forestry?",path:"/why"}],"Essential Features":[{label:"Basics",path:"/store"},{label:"Actions",path:"/actions"},{label:"With React",path:"/react"}],"Power Tools":[{label:"Validation",path:"/validation"},{label:"Schema",path:"/schemas"},{label:"Transactions",path:"/transactions"},{label:"RxJS / Immer",path:"/rxjs"}],"Practical Examples":[{label:"Overview",path:"/examples"},{label:"Todo App",path:"/examples/todo-app"},{label:"Shopping Cart",path:"/examples/shopping-cart"},{label:"Form Validation",path:"/examples/form-validation"},{label:"Transaction Demo",path:"/examples/transaction-demo"}],"API Reference":[{label:"Overview",path:"/api"},{label:"Forest Class",path:"/api#forest"},{label:"Constructor & Properties",path:"/api#forest-constructor"},{label:"Core Methods",path:"/api#forest-core"},{label:"Branching Methods",path:"/api#forest-branching"},{label:"Transactions",path:"/api#forest-transactions"},{label:"Validation",path:"/api#forest-validation"},{label:"ForestBranch",path:"/api#forestbranch"},{label:"Configuration Types",path:"/api#types-config"},{label:"Action Types",path:"/api#types-actions"},{label:"Validation Types",path:"/api#types-validation"},{label:"Utility Types",path:"/api#types-utility"}]},$r=()=>{const t=or(),n=Ae("white","gray.800"),r=Ae("gray.200","gray.700"),[s,i]=dn(Cr),{openMenu:o}=s,a=c=>t.pathname===c;return e.jsx(d,{position:"fixed",top:0,left:0,right:0,zIndex:1e3,bg:n,borderBottom:"1px",borderColor:r,shadow:"sm",children:e.jsx(te,{maxW:"container.xl",children:e.jsxs(mt,{alignItems:"center",justifyContent:"space-between",children:[e.jsxs(q,{as:re,spacing:2,mr:2,to:"/",mr:10,children:[e.jsx(en,{w:"32px",h:"32px",src:"/logo.png"}),e.jsx(l,{fontSize:"xl",fontWeight:"bold",color:"gray.800",whiteSpace:"nowrap",children:"Forestry 4.0"})]}),e.jsxs(q,{spacing:6,children:[Object.entries(Tr).map(([c,u])=>e.jsxs(Hn,{isOpen:o===c,onClose:()=>i.$.closeMenu(),children:[e.jsx(qn,{as:Ie,variant:"ghost",colorScheme:"green",_hover:{bg:"green.100"},_active:{bg:"green.200"},rightIcon:e.jsx(xr,{}),onMouseEnter:()=>i.handleMenuEnter(c),onClick:()=>{o===c?i.closeMenu():i.openMenu(c)},children:c}),e.jsx(Gn,{onMouseLeave:()=>i.handleMenuLeave(),onMouseEnter:()=>i.setHoveredMenu(c),children:u.map(f=>e.jsx(Jn,{as:f.external?re:R,to:f.external?void 0:f.path,href:f.external?f.path:void 0,isExternal:f.external,bg:!f.external&&a(f.path)?"forest.50":"transparent",color:!f.external&&a(f.path)?"forest.600":"gray.700",fontWeight:!f.external&&a(f.path)?"semibold":"normal",_hover:{bg:!f.external&&a(f.path)?"forest.100":"gray.50"},onClick:()=>i.handleItemClick(),children:f.label},f.path))})]},c)),e.jsx(Ie,{as:re,href:"https://github.com/bingomanatee/wonderlandlabs-monorepo",isExternal:!0,variant:"ghost",colorScheme:"gray",size:"sm",_hover:{bg:"gray.100"},leftIcon:e.jsx(kr,{}),"aria-label":"View source on GitHub",children:e.jsx(jr,{ml:1,boxSize:3})})]})]})})})};var ot={exports:{}},Tt;function Er(){return Tt||(Tt=1,(function(t){var n=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(s){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},c={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function g(h){return h instanceof u?new u(h.type,g(h.content),h.alias):Array.isArray(h)?h.map(g):h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(g){return Object.prototype.toString.call(g).slice(8,-1)},objId:function(g){return g.__id||Object.defineProperty(g,"__id",{value:++o}),g.__id},clone:function g(h,j){j=j||{};var y,b;switch(c.util.type(h)){case"Object":if(b=c.util.objId(h),j[b])return j[b];y={},j[b]=y;for(var C in h)h.hasOwnProperty(C)&&(y[C]=g(h[C],j));return y;case"Array":return b=c.util.objId(h),j[b]?j[b]:(y=[],j[b]=y,h.forEach(function(I,F){y[F]=g(I,j)}),y);default:return h}},getLanguage:function(g){for(;g;){var h=i.exec(g.className);if(h)return h[1].toLowerCase();g=g.parentElement}return"none"},setLanguage:function(g,h){g.className=g.className.replace(RegExp(i,"gi"),""),g.classList.add("language-"+h)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(y){var g=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(y.stack)||[])[1];if(g){var h=document.getElementsByTagName("script");for(var j in h)if(h[j].src==g)return h[j]}return null}},isActive:function(g,h,j){for(var y="no-"+h;g;){var b=g.classList;if(b.contains(h))return!0;if(b.contains(y))return!1;g=g.parentElement}return!!j}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(g,h){var j=c.util.clone(c.languages[g]);for(var y in h)j[y]=h[y];return j},insertBefore:function(g,h,j,y){y=y||c.languages;var b=y[g],C={};for(var I in b)if(b.hasOwnProperty(I)){if(I==h)for(var F in j)j.hasOwnProperty(F)&&(C[F]=j[F]);j.hasOwnProperty(I)||(C[I]=b[I])}var B=y[g];return y[g]=C,c.languages.DFS(c.languages,function(X,ge){ge===B&&X!=g&&(this[X]=C)}),C},DFS:function g(h,j,y,b){b=b||{};var C=c.util.objId;for(var I in h)if(h.hasOwnProperty(I)){j.call(h,I,h[I],y||I);var F=h[I],B=c.util.type(F);B==="Object"&&!b[C(F)]?(b[C(F)]=!0,g(F,j,null,b)):B==="Array"&&!b[C(F)]&&(b[C(F)]=!0,g(F,j,I,b))}}},plugins:{},highlightAll:function(g,h){c.highlightAllUnder(document,g,h)},highlightAllUnder:function(g,h,j){var y={callback:j,container:g,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};c.hooks.run("before-highlightall",y),y.elements=Array.prototype.slice.apply(y.container.querySelectorAll(y.selector)),c.hooks.run("before-all-elements-highlight",y);for(var b=0,C;C=y.elements[b++];)c.highlightElement(C,h===!0,y.callback)},highlightElement:function(g,h,j){var y=c.util.getLanguage(g),b=c.languages[y];c.util.setLanguage(g,y);var C=g.parentElement;C&&C.nodeName.toLowerCase()==="pre"&&c.util.setLanguage(C,y);var I=g.textContent,F={element:g,language:y,grammar:b,code:I};function B(ge){F.highlightedCode=ge,c.hooks.run("before-insert",F),F.element.innerHTML=F.highlightedCode,c.hooks.run("after-highlight",F),c.hooks.run("complete",F),j&&j.call(F.element)}if(c.hooks.run("before-sanity-check",F),C=F.element.parentElement,C&&C.nodeName.toLowerCase()==="pre"&&!C.hasAttribute("tabindex")&&C.setAttribute("tabindex","0"),!F.code){c.hooks.run("complete",F),j&&j.call(F.element);return}if(c.hooks.run("before-highlight",F),!F.grammar){B(c.util.encode(F.code));return}if(h&&s.Worker){var X=new Worker(c.filename);X.onmessage=function(ge){B(ge.data)},X.postMessage(JSON.stringify({language:F.language,code:F.code,immediateClose:!0}))}else B(c.highlight(F.code,F.grammar,F.language))},highlight:function(g,h,j){var y={code:g,grammar:h,language:j};if(c.hooks.run("before-tokenize",y),!y.grammar)throw new Error('The language "'+y.language+'" has no grammar.');return y.tokens=c.tokenize(y.code,y.grammar),c.hooks.run("after-tokenize",y),u.stringify(c.util.encode(y.tokens),y.language)},tokenize:function(g,h){var j=h.rest;if(j){for(var y in j)h[y]=j[y];delete h.rest}var b=new A;return $(b,b.head,g),z(g,b,h,b.head,0),P(b)},hooks:{all:{},add:function(g,h){var j=c.hooks.all;j[g]=j[g]||[],j[g].push(h)},run:function(g,h){var j=c.hooks.all[g];if(!(!j||!j.length))for(var y=0,b;b=j[y++];)b(h)}},Token:u};s.Prism=c;function u(g,h,j,y){this.type=g,this.content=h,this.alias=j,this.length=(y||"").length|0}u.stringify=function g(h,j){if(typeof h=="string")return h;if(Array.isArray(h)){var y="";return h.forEach(function(B){y+=g(B,j)}),y}var b={type:h.type,content:g(h.content,j),tag:"span",classes:["token",h.type],attributes:{},language:j},C=h.alias;C&&(Array.isArray(C)?Array.prototype.push.apply(b.classes,C):b.classes.push(C)),c.hooks.run("wrap",b);var I="";for(var F in b.attributes)I+=" "+F+'="'+(b.attributes[F]||"").replace(/"/g,"&quot;")+'"';return"<"+b.tag+' class="'+b.classes.join(" ")+'"'+I+">"+b.content+"</"+b.tag+">"};function f(g,h,j,y){g.lastIndex=h;var b=g.exec(j);if(b&&y&&b[1]){var C=b[1].length;b.index+=C,b[0]=b[0].slice(C)}return b}function z(g,h,j,y,b,C){for(var I in j)if(!(!j.hasOwnProperty(I)||!j[I])){var F=j[I];F=Array.isArray(F)?F:[F];for(var B=0;B<F.length;++B){if(C&&C.cause==I+","+B)return;var X=F[B],ge=X.inside,wt=!!X.lookbehind,St=!!X.greedy,Nn=X.alias;if(St&&!X.pattern.global){var Un=X.pattern.toString().match(/[imsuy]*$/)[0];X.pattern=RegExp(X.pattern.source,Un+"g")}for(var zt=X.pattern||X,Q=y.next,ue=b;Q!==h.tail&&!(C&&ue>=C.reach);ue+=Q.value.length,Q=Q.next){var Se=Q.value;if(h.length>g.length)return;if(!(Se instanceof u)){var De=1,ae;if(St){if(ae=f(zt,ue,g,wt),!ae||ae.index>=g.length)break;var Oe=ae.index,Bn=ae.index+ae[0].length,fe=ue;for(fe+=Q.value.length;Oe>=fe;)Q=Q.next,fe+=Q.value.length;if(fe-=Q.value.length,ue=fe,Q.value instanceof u)continue;for(var Ce=Q;Ce!==h.tail&&(fe<Bn||typeof Ce.value=="string");Ce=Ce.next)De++,fe+=Ce.value.length;De--,Se=g.slice(ue,fe),ae.index-=ue}else if(ae=f(zt,0,Se,wt),!ae)continue;var Oe=ae.index,Le=ae[0],nt=Se.slice(0,Oe),_t=Se.slice(Oe+Le.length),rt=ue+Se.length;C&&rt>C.reach&&(C.reach=rt);var Me=Q.prev;nt&&(Me=$(h,Me,nt),ue+=nt.length),E(h,Me,De);var Wn=new u(I,ge?c.tokenize(Le,ge):Le,Nn,Le);if(Q=$(h,Me,Wn),_t&&$(h,Q,_t),De>1){var st={cause:I+","+B,reach:rt};z(g,h,j,Q.prev,ue,st),C&&st.reach>C.reach&&(C.reach=st.reach)}}}}}}function A(){var g={value:null,prev:null,next:null},h={value:null,prev:g,next:null};g.next=h,this.head=g,this.tail=h,this.length=0}function $(g,h,j){var y=h.next,b={value:j,prev:h,next:y};return h.next=b,y.prev=b,g.length++,b}function E(g,h,j){for(var y=h.next,b=0;b<j&&y!==g.tail;b++)y=y.next;h.next=y,y.prev=h,g.length-=b}function P(g){for(var h=[],j=g.head.next;j!==g.tail;)h.push(j.value),j=j.next;return h}if(!s.document)return s.addEventListener&&(c.disableWorkerMessageHandler||s.addEventListener("message",function(g){var h=JSON.parse(g.data),j=h.language,y=h.code,b=h.immediateClose;s.postMessage(c.highlight(y,c.languages[j],j)),b&&s.close()},!1)),c;var U=c.util.currentScript();U&&(c.filename=U.src,U.hasAttribute("data-manual")&&(c.manual=!0));function Z(){c.manual||c.highlightAll()}if(!c.manual){var H=document.readyState;H==="loading"||H==="interactive"&&U&&U.defer?document.addEventListener("DOMContentLoaded",Z):window.requestAnimationFrame?window.requestAnimationFrame(Z):window.setTimeout(Z,16)}return c})(n);t.exports&&(t.exports=r),typeof At<"u"&&(At.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(i,o){var a={};a["language-"+o]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[o]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var c={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};c["language-"+o]={pattern:/[\s\S]+/,inside:r.languages[o]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:c},r.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(s,i){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:r.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(s){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var o=s.languages.markup;o&&(o.tag.addInlined("style","css"),o.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loadingâ€¦",i=function(U,Z){return"âœ– Error "+U+" while fetching file: "+Z},o="âœ– Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},c="data-src-status",u="loading",f="loaded",z="failed",A="pre[data-src]:not(["+c+'="'+f+'"]):not(['+c+'="'+u+'"])';function $(U,Z,H){var g=new XMLHttpRequest;g.open("GET",U,!0),g.onreadystatechange=function(){g.readyState==4&&(g.status<400&&g.responseText?Z(g.responseText):g.status>=400?H(i(g.status,g.statusText)):H(o))},g.send(null)}function E(U){var Z=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(U||"");if(Z){var H=Number(Z[1]),g=Z[2],h=Z[3];return g?h?[H,Number(h)]:[H,void 0]:[H,H]}}r.hooks.add("before-highlightall",function(U){U.selector+=", "+A}),r.hooks.add("before-sanity-check",function(U){var Z=U.element;if(Z.matches(A)){U.code="",Z.setAttribute(c,u);var H=Z.appendChild(document.createElement("CODE"));H.textContent=s;var g=Z.getAttribute("data-src"),h=U.language;if(h==="none"){var j=(/\.(\w+)$/.exec(g)||[,"none"])[1];h=a[j]||j}r.util.setLanguage(H,h),r.util.setLanguage(Z,h);var y=r.plugins.autoloader;y&&y.loadLanguages(h),$(g,function(b){Z.setAttribute(c,f);var C=E(Z.getAttribute("data-range"));if(C){var I=b.split(/\r\n?|\n/g),F=C[0],B=C[1]==null?I.length:C[1];F<0&&(F+=I.length),F=Math.max(0,Math.min(F-1,I.length)),B<0&&(B+=I.length),B=Math.max(0,Math.min(B,I.length)),b=I.slice(F,B).join(`
`),Z.hasAttribute("data-start")||Z.setAttribute("data-start",String(F+1))}H.textContent=b,r.highlightElement(H)},function(b){Z.setAttribute(c,z),H.textContent=b})}}),r.plugins.fileHighlight={highlight:function(Z){for(var H=(Z||document).querySelectorAll(A),g=0,h;h=H[g++];)r.highlightElement(h)}};var P=!1;r.fileHighlight=function(){P||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),P=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(ot)),ot.exports}var Ir=Er();const Zr=an(Ir);var $t={},Et;function Pr(){return Et||(Et=1,(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var n=t.languages.extend("typescript",{});delete n["class-name"],t.languages.typescript["class-name"].inside=n,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n}}}}),t.languages.ts=t.languages.typescript})(Prism)),$t}Pr();(function(t){var n=t.util.clone(t.languages.javascript),r=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,s=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(u,f){return u=u.replace(/<S>/g,function(){return r}).replace(/<BRACES>/g,function(){return s}).replace(/<SPREAD>/g,function(){return i}),RegExp(u,f)}i=o(i).source,t.languages.jsx=t.languages.extend("markup",n),t.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=n.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var a=function(u){return u?typeof u=="string"?u:typeof u.content=="string"?u.content:u.content.map(a).join(""):""},c=function(u){for(var f=[],z=0;z<u.length;z++){var A=u[z],$=!1;if(typeof A!="string"&&(A.type==="tag"&&A.content[0]&&A.content[0].type==="tag"?A.content[0].content[0].content==="</"?f.length>0&&f[f.length-1].tagName===a(A.content[0].content[1])&&f.pop():A.content[A.content.length-1].content==="/>"||f.push({tagName:a(A.content[0].content[1]),openedBraces:0}):f.length>0&&A.type==="punctuation"&&A.content==="{"?f[f.length-1].openedBraces++:f.length>0&&f[f.length-1].openedBraces>0&&A.type==="punctuation"&&A.content==="}"?f[f.length-1].openedBraces--:$=!0),($||typeof A=="string")&&f.length>0&&f[f.length-1].openedBraces===0){var E=a(A);z<u.length-1&&(typeof u[z+1]=="string"||u[z+1].type==="plain-text")&&(E+=a(u[z+1]),u.splice(z+1,1)),z>0&&(typeof u[z-1]=="string"||u[z-1].type==="plain-text")&&(E=a(u[z-1])+E,u.splice(z-1,1),z--),u[z]=new t.Token("plain-text",E,null,E)}A.content&&typeof A.content!="string"&&c(A.content)}};t.hooks.add("after-tokenize",function(u){u.language!=="jsx"&&u.language!=="tsx"||c(u.tokens)})})(Prism);(function(t){var n=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",n),delete t.languages.tsx.parameter,delete t.languages.tsx["literal-property"];var r=t.languages.tsx.tag;r.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+r.pattern.source+")",r.pattern.flags),r.lookbehind=!0})(Prism);const ke=({tabs:t,defaultIndex:n=0})=>{const r=Ae("gray.900","gray.800"),[s,i]=ce.useState([]);ce.useEffect(()=>{(async()=>{const c=await Promise.all(t.map(async u=>{if(u.code)return u.code;if(u.snippet)try{const f=u.ts?".ts.txt":u.tsx?".tsx.txt":u.language==="bash"?".sh":(u.language==="tsx",".tsx.txt"),z=u.folder?`/snippets/${u.folder}/${u.snippet}${f}`:`/snippets/${u.snippet}${f}`,A=await fetch(z);if(!A.ok)throw new Error(`Failed to load snippet: ${u.snippet}`);const $=await A.text();return console.log("config:",u),console.log("path: ",z),console.log("  .... text = ",$.substring(0,100).replace(`
`,"")),$.split(`
`).filter(P=>!P.startsWith("// Auto-generated snippet from:")).filter(P=>!P.startsWith("// Description:")).filter(P=>!P.startsWith("// Last synced:")).filter(P=>!P.startsWith("// DO NOT EDIT")).join(`
`).replace(/^\n+/,"")}catch{return`// Error loading snippet: ${u.snippet}`}return"// No content"}));i(c)})()},[t]);const o=Ae("gray.200","gray.600");return ce.useEffect(()=>{Zr.highlightAll()},[s]),e.jsx(d,{border:"1px",borderColor:o,borderRadius:"md",overflow:"hidden",my:4,width:"full",children:e.jsxs(tn,{defaultIndex:n,variant:"enclosed",children:[e.jsx(nn,{bg:"gray.100",borderBottom:"1px",borderColor:o,children:t.map((a,c)=>e.jsx($e,{fontSize:"sm",fontWeight:"medium",_selected:{bg:r,color:"white",borderBottomColor:r},children:a.label},c))}),e.jsx(rn,{children:t.map((a,c)=>e.jsx(Ee,{p:0,children:e.jsx(d,{as:"pre",bg:r,color:"white",p:4,overflow:"auto",fontSize:"sm",fontFamily:"mono",lineHeight:"1.5",children:e.jsx(O,{as:"code",className:`language-${a.language}`,bg:"transparent",color:"inherit",p:0,fontSize:"inherit",fontFamily:"inherit",whiteSpace:"pre",children:s[c]||"// Loading..."})})},c))})]})})},W=({children:t,title:n,titleSize:r="lg",spacing:s=6,noVStack:i=!1,...o})=>{const a=n?e.jsx(p,{textAlign:"center",size:r,children:n}):"";return e.jsx(sn,{width:"full",mb:3,children:e.jsxs(on,{...o,children:[a,i?t:e.jsx(w,{spacing:s,align:"stretch",children:t})]})})},Rr=()=>"",Dr=()=>{const t=[{label:"Installation",language:"bash",snippet:"installation",folder:"home"},{label:"Basic Usage",language:"typescript",snippet:"basic-usage",folder:"home",ts:!0}];return e.jsxs(te,{maxW:"container.xl",py:8,children:[" ",e.jsxs(q,{spacing:2,width:"full",justify:"space-between",align:"flex-start",children:[e.jsx(Ie,{as:R,to:"/why",colorScheme:"forest",size:"lg",children:"Why Forestry?"}),e.jsxs(w,{spacing:2,textAlign:"center",mb:6,children:[e.jsxs(q,{children:[e.jsx(en,{w:"64px",h:"64px",src:"/logo.png"}),e.jsx(p,{size:"2xl",color:"gray.800",children:"Forestry 4.0"})]}),e.jsx(l,{fontSize:"xl",color:"gray.600",maxW:"2xl",children:"A simple, powerful state management library for React. Start with the essentials, then unlock advanced features when you need them."})]})," ",e.jsx(Ie,{as:R,to:"/store",variant:"outline",size:"lg",children:"Get Started"})]}),e.jsxs(pe,{columns:{base:1,lg:2},spacing:8,mb:12,children:[e.jsxs(W,{children:[e.jsxs(w,{spacing:0,children:[e.jsx(p,{size:"lg",color:"forest.700",my:2,children:"Get productive in 5 minutes"}),e.jsx(l,{color:"gray.600",children:"Everything you need to manage state in React applications. Simple, predictable, and powerful."})]}),e.jsxs(w,{align:"start",spacing:2,fontSize:"sm",children:[e.jsxs(q,{children:[e.jsx(l,{children:"âœ…"}),e.jsx(l,{as:R,to:"/store",color:"forest.600",_hover:{textDecoration:"underline"},children:"Create stores with initial state"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"âœ…"}),e.jsx(l,{as:R,to:"/actions",color:"forest.600",_hover:{textDecoration:"underline"},children:"Define actions for state updates"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"âœ…"}),e.jsx(l,{as:R,to:"/react",color:"forest.600",_hover:{textDecoration:"underline"},children:"React hooks integration"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"âœ…"}),e.jsx(l,{as:R,to:"/store",color:"forest.600",_hover:{textDecoration:"underline"},children:"TypeScript support"})]})]})]}),e.jsxs(W,{children:[e.jsxs(w,{spacing:0,align:"start",children:[e.jsx(p,{size:"lg",color:"purple.700",my:2,children:"Advanced capabilities"}),e.jsx(l,{color:"gray.600",children:"Unlock advanced features for complex applications: validation, transactions, and reactive patterns."})]}),e.jsxs(w,{align:"start",spacing:2,fontSize:"sm",children:[e.jsxs(q,{children:[e.jsx(l,{children:"ðŸ”§"}),e.jsx(l,{as:R,to:"/validation",color:"purple.600",_hover:{textDecoration:"underline"},children:"Built-in validation system"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"ðŸ”§"}),e.jsx(l,{as:R,to:"/transactions",color:"purple.600",_hover:{textDecoration:"underline"},children:"Atomic transactions with rollback"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"ðŸ”§"}),e.jsx(l,{as:R,to:"/rxjs",color:"purple.600",_hover:{textDecoration:"underline"},children:"RxJS reactive programming"})]}),e.jsxs(q,{children:[e.jsx(l,{children:"ðŸ”§"}),e.jsx(l,{as:R,to:"/examples",color:"purple.600",_hover:{textDecoration:"underline"},children:"Advanced patterns & debugging"})]})]})]})]}),e.jsxs(d,{mb:12,children:[e.jsx(p,{size:"lg",mb:6,children:"Quick Start"}),e.jsx(ke,{tabs:t})]}),e.jsxs(W,{title:"Example - basic counter",children:[e.jsx(Rr,{}),e.jsx(He,{}),e.jsx(ke,{tabs:[{label:"Store Factory",language:"typescript",snippet:"demo-store-definition",folder:"home",ts:!0},{label:"Component",language:"tsx",snippet:"demo-jsx-template",folder:"home"}]})]})]})},Or=()=>e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{textAlign:"center",children:[e.jsx(p,{size:"xl",mb:4,children:"Why Choose Forestry?"}),e.jsx(l,{fontSize:"lg",color:"gray.600",maxW:"3xl",mx:"auto",children:"Forestry provides a powerful, type-safe, and intuitive approach to state management that scales from simple components to complex applications."})]}),e.jsxs(pe,{columns:{base:1,md:2,lg:3},spacing:6,children:[e.jsxs(d,{layerStyle:"card",bg:"blue.50",children:[e.jsx(ye,{as:be,color:"blue.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"blue.700",children:"Type Safety First"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"blue.500"}),"Full TypeScript integration"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"blue.500"}),"Compile-time error detection"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"blue.500"}),"IntelliSense support"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"blue.500"}),"Zod schema validation"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"green.50",children:[e.jsx(ye,{as:be,color:"green.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"green.700",children:"Reactive by Design"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"green.500"}),"RxJS-powered reactivity"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"green.500"}),"Automatic UI updates"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"green.500"}),"Efficient change detection"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"green.500"}),"Subscription management"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"purple.50",children:[e.jsx(ye,{as:be,color:"purple.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"purple.700",children:"Developer Experience"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"purple.500"}),"Intuitive API design"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"purple.500"}),"Minimal boilerplate"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"purple.500"}),"Built-in testing tools"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"purple.500"}),"Excellent debugging"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"orange.50",children:[e.jsx(ye,{as:be,color:"orange.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"orange.700",children:"Validation & Quality"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"orange.500"}),"Three-layer validation"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"orange.500"}),"Runtime type checking"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"orange.500"}),"Quality feedback system"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"orange.500"}),"Error boundary support"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"teal.50",children:[e.jsx(ye,{as:be,color:"teal.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"teal.700",children:"Scalable Architecture"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"teal.500"}),"Modular store design"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"teal.500"}),"Forest branching system"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"teal.500"}),"Factory pattern support"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"teal.500"}),"Dependency injection"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"red.50",children:[e.jsx(ye,{as:be,color:"red.500",boxSize:8,mb:4}),e.jsx(p,{size:"md",mb:3,color:"red.700",children:"React Integration"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:L,color:"red.500"}),"Custom React hooks"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"red.500"}),"Automatic cleanup"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"red.500"}),"SSR compatibility"]}),e.jsxs(x,{children:[e.jsx(v,{as:L,color:"red.500"}),"DevTools integration"]})]})]})]})]}),Lr=()=>e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"xl",mb:4,children:"Yet Another Store System?"}),e.jsxs(l,{fontSize:"lg",color:"gray.600",maxW:"3xl",children:["Forestry grew from a profound disaffection in the status quo. Redux, mainly but also a lot of other alternatives including hooks. I saw the same patterns happening over and over again:",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("b",{children:"A lack of the ability to synchronously update state"}),". There is no inbuilt reason that local state needs to be forced into async patterns. (as is the case in hooks) like RxJs (the backbone of Forestry) you should be able to change state and see results in real time. hooks for instnace are particularly poor at reflecting the real time state of anything given the large refresh cycle of useState."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Far too much magic"}),". Actions should be straight up javascript code with as little magic as necessary."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Had coded state that is difficult to test"}),". Most state systems are so wed to their context that they are difficult to isolate; this violates separation of concerns and frankly most React testing is so painful that it behooves you to extricate the business logic and enable independent testing."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Abdication of responsibility for schema enforcement"}),'; validation of change values before they are submitted into state is not something to be put in as optional nice to have or assumed to be a "solved problem" with typescript. State data is dynamic and often comes from sources outside the codebase (fetch), so typescript cannot enforce type sanity - state must take that responsibility to heart.']}),e.jsxs("li",{children:[e.jsx("b",{children:"Lack of transactional atomicity"}),"; often you need to make several changes in sequence and have them all succeed or fail; especially important with the use of nested actions. Forestry even allows you to temporarily suspend validation constraints while you change state over several steps as long as the net effect of transactions produce valid data."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Nested Actions"}),"; composition is very difficult or impossible in many state systems; Forestry allows you to drill deep into multiple actions."]})]}),'Foresty has been written to address these features point by point. Many of the solutions are "passive" - some like ',e.jsx(R,{to:"/validation",children:"Validation"}),"require some tooling."]})]}),e.jsxs(d,{layerStyle:"card",bg:"gray.50",children:[e.jsx(p,{size:"lg",mb:6,children:"Feature Comparison"}),e.jsx(Kn,{children:e.jsxs(Yn,{variant:"simple",size:"sm",children:[e.jsx(Xn,{children:e.jsxs(ie,{children:[e.jsx(Te,{children:"Feature"}),e.jsx(Te,{textAlign:"center",children:"Forestry"}),e.jsx(Te,{textAlign:"center",children:"Redux"}),e.jsx(Te,{textAlign:"center",children:"Zustand"}),e.jsx(Te,{textAlign:"center",children:"Jotai"})]})}),e.jsxs(Qn,{children:[e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"TypeScript Support"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Excellent"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Good"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Excellent"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Excellent"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Boilerplate"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Minimal"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Heavy"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Minimal"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Medium"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Validation"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Built-in"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"External"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"External"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"External"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Reactivity"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"RxJS"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Manual"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Manual"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Automatic"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"DevTools"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Built-in"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Excellent"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Basic"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Basic"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Learning Curve"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Gentle"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Steep"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Gentle"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Medium"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Action Testability"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Excellent"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Complex"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Manual"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Manual"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Atomic Operations"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Built-in"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Manual"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Manual"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Manual"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Context Independence"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Complete"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Coupled"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Partial"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Partial"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Real-time Feedback"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Synchronous"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Async Only"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Limited"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Limited"})})]}),e.jsxs(ie,{children:[e.jsx(_,{fontWeight:"semibold",children:"Bundle Size"}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"yellow",children:"Medium"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"red",children:"Large"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Small"})}),e.jsx(_,{textAlign:"center",children:e.jsx(S,{colorScheme:"green",children:"Small"})})]})]})]})})]}),e.jsxs(d,{layerStyle:"card",bg:"blue.50",children:[e.jsx(p,{size:"lg",mb:6,children:"Code Comparison"}),e.jsx(l,{color:"gray.600",mb:6,children:"Compare how the same functionality looks across different state management solutions."}),e.jsx(ke,{tabs:[{label:"Forestry",language:"typescript",snippet:"forestryExample",folder:"WhyForestry"},{label:"Redux Toolkit",language:"typescript",snippet:"reduxExample",folder:"WhyForestry"},{label:"Zustand",language:"typescript",snippet:"zustandExample",folder:"WhyForestry"}]})]}),e.jsxs(pe,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(d,{layerStyle:"card",bg:"green.50",children:[e.jsx(p,{size:"md",mb:4,color:"green.700",children:"âœ… Forestry Advantages"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Built-in Validation:"})," Three-layer validation system with runtime checks"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"RxJS Integration:"})," Powerful reactive programming capabilities"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Forest Branching:"})," Unique field-level state management for forms"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Quality Feedback:"})," User-friendly validation messages"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Factory Pattern:"})," Dependency injection and reusable store creation"]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"orange.50",children:[e.jsx(p,{size:"md",mb:4,color:"orange.700",children:"âš ï¸ Trade-offs"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Learning Curve:"})," New concepts like Forest branching and validation layers"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Bundle Size:"})," RxJS dependency adds to bundle size"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Ecosystem:"})," Newer library with smaller community"]}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Documentation:"})," Still growing compared to established solutions"]})]})]})]})]}),se=({title:t,language:n,code:r,children:s})=>{const i=Ae("gray.900","gray.800"),o=Ae("gray.200","gray.600"),a=er(),[c,u]=ce.useState(!1),[f,z]=ce.useState(!1),A=ce.useRef(null),$=s??r??"",E=async()=>{try{await navigator.clipboard.writeText($.toString()),a({title:"Copied to clipboard",status:"success",duration:2e3,isClosable:!0})}catch{a({title:"Failed to copy",status:"error",duration:2e3,isClosable:!0})}};return ce.useEffect(()=>{if(A.current){const P=A.current.scrollHeight,U=A.current.clientHeight;z(P>U)}},[$]),e.jsxs(d,{border:"1px",borderColor:o,borderRadius:"md",width:"full",overflow:"hidden",my:4,children:[t&&e.jsx(d,{bg:"gray.100",px:4,py:2,borderBottom:"1px",borderColor:o,children:e.jsx(l,{fontSize:"sm",fontWeight:"medium",children:t})}),e.jsxs(d,{position:"relative",children:[e.jsx(tr,{"aria-label":"Copy code",icon:e.jsx(mr,{}),size:"sm",position:"absolute",top:2,right:2,zIndex:1,colorScheme:"gray",variant:"ghost",color:"gray.400",_hover:{color:"white",bg:"gray.700"},onClick:E}),e.jsx(d,{ref:A,as:"pre",bg:i,color:"white",p:4,overflow:"auto",fontSize:"sm",fontFamily:"mono",lineHeight:"1.5",maxHeight:c?"none":"300px",transition:"max-height 0.3s ease",children:e.jsx(O,{as:"code",className:`language-${n}`,bg:"transparent",color:"inherit",p:0,fontSize:"inherit",fontFamily:"inherit",whiteSpace:"pre",children:s??r})}),f&&e.jsx(d,{position:"absolute",bottom:0,left:0,right:0,bg:c?"transparent":`linear-gradient(transparent, ${i})`,m:6,children:e.jsx(mt,{direction:"row",justify:"flex-end",children:e.jsx(Ie,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>u(!c),bg:i,color:"white",borderColor:"blue.400",_hover:{bg:"blue.600"},children:c?"Show Less":"Show More"})})})]})]})},Mr=(t,n,r)=>new dr({name:`snippet-${n?`${n}-`:""}${t}`,value:{code:"",loading:!0,error:null},actions:{loadSnippet:async function(){this.mutate(s=>{s.loading=!0,s.error=null});try{const s=r?".ts":".tsx.txt",i=n?`/snippets/${n}/${t}${s}`:`/snippets/${t}${s}`,o=await fetch(i);if(!o.ok)throw new Error(`Failed to load snippet: ${t}`);const c=(await o.text()).split(`
`).filter(u=>!u.startsWith("// Auto-generated snippet from:")).filter(u=>!u.startsWith("// Description:")).filter(u=>!u.startsWith("// Last synced:")).filter(u=>!u.startsWith("// DO NOT EDIT")).join(`
`).replace(/^\n+/,"");this.mutate(u=>{u.code=c,u.loading=!1})}catch(s){const i=s instanceof Error?s.message:"Unknown error";console.error("Failed to load snippet:",t,i),this.mutate(o=>{o.error=i,o.code=`// Error loading snippet: ${t}
// Error: ${i}`,o.loading=!1})}}}}),Y=({snippetName:t,language:n="typescript",folder:r,ts:s})=>{const[i,o]=dn(Mr,t,r,s);return he.useEffect(()=>{o.$.loadSnippet()},[o]),i.loading?e.jsx(se,{language:n,children:"// Loading..."}):i.error?e.jsxs(se,{language:n,children:["// Error: ",i.error]}):e.jsx(se,{language:n,children:i.code})},Vr=()=>"",Nr=()=>e.jsx(d,{layerStyle:"card",bg:"blue.50",children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"lg",mb:2,children:"Try Forestry Live"}),e.jsx(l,{color:"gray.600",children:"Interact with a real Forestry store. See the source code and try the live demo side by side."})]}),e.jsxs(tn,{variant:"enclosed",colorScheme:"blue",children:[e.jsxs(nn,{children:[e.jsx($e,{children:"Live Demo"}),e.jsx($e,{children:"Store Factory"}),e.jsx($e,{children:"Component Code"}),e.jsx($e,{children:"VITest Tests"})]}),e.jsxs(rn,{children:[e.jsx(Ee,{children:e.jsx(Vr,{})}),e.jsx(Ee,{children:e.jsx(se,{language:"typescript",title:"Store Factory (demoStoreFactory.ts)",children:`import { Forest } from '@wonderlandlabs/forestry4';

interface UserProfile {
  name: string;
  age: number;
  email: string;
  preferences: {
    theme: 'light' | 'dark';
  };
  errors: Record<string, string | null>;
}

export default function demoStoreFactory() {
  return new Forest<UserProfile>({
    name: 'user-profile-demo',
    value: {
      name: '',
      age: 0,
      email: '',
      preferences: { theme: 'light' },
      errors: {}
    },
    actions: {
      // Universal input handler - just handles input conversion
      handleInputChange: function(value, event: React.ChangeEvent<HTMLInputElement>) {
        const { name, value: fieldValue, type } = event.target;

        if (type === 'number') {
          const numValue = parseInt(fieldValue) || 0;
          this.set(name, numValue);
        } else {
          this.set(name, fieldValue);
        }
      },

      handleThemeChange: function(value, event: React.ChangeEvent<HTMLSelectElement>) {
        const theme = event.target.value as 'light' | 'dark';
        // Deep set for nested property
        this.set('preferences.theme', theme);
      },

      // Update profile fields
      updateProfile: function(value, updates: Partial<UserProfile>) {
        this.mutate(draft => {
          Object.assign(draft, updates);
        });
      },

      // Update preferences
      updatePreferences: function(value, prefs: Partial<UserProfile['preferences']>) {
        this.mutate(draft => {
          Object.assign(draft.preferences, prefs);
        });
      },

      // Nested action that calls other actions
      setupUser: function(value, userData: {
        profile: Partial<UserProfile>,
        preferences: Partial<UserProfile['preferences']>
      }) {
        this.$.updateProfile(userData.profile);
        this.$.updatePreferences(userData.preferences);
      },

      // Action with validation
      setAge: function(value, age: number) {
        if (age < 0 || age > 150) {
          throw new Error('Age must be between 0 and 150');
        }
        this.mutate(draft => {
          draft.age = age;
        });
      },

      // Complex validation example
      validateAndSave: function(value) {
        const errors: string[] = [];

        if (!value.name.trim()) {
          errors.push('Name is required');
        }
        if (!value.email.includes('@')) {
          errors.push('Valid email is required');
        }
        if (value.age < 13) {
          errors.push('Must be at least 13 years old');
        }

        if (errors.length > 0) {
          throw new Error(\`Validation failed: \${errors.join(', ')}\`);
        }

        return 'Profile saved successfully!';
      }
    },
    tests: [
      (value: UserProfile) => {
        if (typeof value.name !== 'string') {
          return 'Name must be a string';
        }
        return null;
      },
      (value: UserProfile) => {
        if (typeof value.age !== 'number') {
          return 'Age must be a number';
        }
        return null;
      }
    ],
    prep: [
      // Validation prep function - runs after any state change
      function(value: UserProfile) {
        const errors: Record<string, string | null> = {};

        // Validate name
        if (!value.name.trim()) {
          errors.name = 'Name is required';
        } else if (value.name.trim().length < 2) {
          errors.name = 'Name must be at least 2 characters';
        } else {
          errors.name = null;
        }

        // Validate age
        if (value.age < 0) {
          errors.age = 'Age cannot be negative';
        } else if (value.age > 150) {
          errors.age = 'Age cannot exceed 150 years';
        } else if (value.age > 0 && value.age < 13) {
          errors.age = 'Must be at least 13 years old';
        } else {
          errors.age = null;
        }

        // Validate email
        if (value.email && !value.email.includes('@')) {
          errors.email = 'Please enter a valid email address';
        } else {
          errors.email = null;
        }

        // Update errors object using mutate to avoid recursion
        this.mutate(draft => {
          draft.errors = errors;
        });
      }
    ]
  });
}`})}),e.jsx(Ee,{children:e.jsx(Y,{snippetName:"InteractiveDemo",language:"typescript",title:"InteractiveDemo Component Source"})}),e.jsx(Ee,{children:e.jsx(Y,{snippetName:"demoStoreFactory-tests",language:"typescript",ts:!0})})]})]}),e.jsxs(le,{status:"info",mt:4,children:[e.jsx(de,{}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",children:"Live Forestry Store in Action"}),e.jsx(l,{fontSize:"sm",mt:1,children:"This demo uses useForestryLocal hook for reactive updates. Switch between tabs to see the source code and try the interactive demo."})]})]})]})}),Ur=()=>e.jsx(te,{maxW:"6xl",py:8,children:e.jsxs(w,{spacing:12,align:"stretch",children:[e.jsxs(d,{textAlign:"center",children:[e.jsx(p,{size:"3xl",mb:6,children:"Why Forestry?"}),e.jsx(l,{textStyle:"hero",children:"Forestry is a next-generation state management library that combines the power of RxJS reactivity with TypeScript safety and an intuitive developer experience."})]}),e.jsx(Lr,{}),e.jsx(He,{}),e.jsx(Or,{}),e.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/bGzanfKVFeU?si=XVsdcSKOh3CcEYFm",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}),e.jsx(l,{children:"the TLDR of the above; "}),e.jsx(He,{}),e.jsxs(d,{children:[e.jsx(p,{size:"xl",mb:6,textAlign:"center",children:"Try Forestry Live"}),e.jsx(Nr,{})]}),e.jsx(He,{})]})});function m(t,n,r){function s(c,u){var f;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(f=c._zod).traits??(f.traits=new Set),c._zod.traits.add(t),n(c,u);for(const z in a.prototype)z in c||Object.defineProperty(c,z,{value:a.prototype[z].bind(c)});c._zod.constr=a,c._zod.def=u}const i=r?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function a(c){var u;const f=r?.Parent?new o:this;s(f,c),(u=f._zod).deferred??(u.deferred=[]);for(const z of f._zod.deferred)z();return f}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(a,"name",{value:t}),a}class _e extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class un extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const hn={};function ve(t){return hn}function Br(t){const n=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,i])=>n.indexOf(+s)===-1).map(([s,i])=>i)}function lt(t,n){return typeof n=="bigint"?n.toString():n}function gt(t){return{get value(){{const n=t();return Object.defineProperty(this,"value",{value:n}),n}}}}function ft(t){return t==null}function xt(t){const n=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(n,r)}function Wr(t,n){const r=(t.toString().split(".")[1]||"").length,s=n.toString();let i=(s.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(s)){const u=s.match(/\d?e-(\d?)/);u?.[1]&&(i=Number.parseInt(u[1]))}const o=r>i?r:i,a=Number.parseInt(t.toFixed(o).replace(".","")),c=Number.parseInt(n.toFixed(o).replace(".",""));return a%c/10**o}const It=Symbol("evaluating");function D(t,n,r){let s;Object.defineProperty(t,n,{get(){if(s!==It)return s===void 0&&(s=It,s=r()),s},set(i){Object.defineProperty(t,n,{value:i})},configurable:!0})}function Hr(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function xe(t,n,r){Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Fe(...t){const n={};for(const r of t){const s=Object.getOwnPropertyDescriptors(r);Object.assign(n,s)}return Object.defineProperties({},n)}function Zt(t){return JSON.stringify(t)}const pn="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Je(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const qr=gt(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ze(t){if(Je(t)===!1)return!1;const n=t.constructor;if(n===void 0)return!0;const r=n.prototype;return!(Je(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function mn(t){return Ze(t)?{...t}:Array.isArray(t)?[...t]:t}const Gr=new Set(["string","number","symbol"]);function Xe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function je(t,n,r){const s=new t._zod.constr(n??t._zod.def);return(!n||r?.parent)&&(s._zod.parent=t),s}function k(t){const n=t;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function Jr(t){return Object.keys(t).filter(n=>t[n]._zod.optin==="optional"&&t[n]._zod.optout==="optional")}const Kr={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Yr(t,n){const r=t._zod.def,s=Fe(t._zod.def,{get shape(){const i={};for(const o in n){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=r.shape[o])}return xe(this,"shape",i),i},checks:[]});return je(t,s)}function Xr(t,n){const r=t._zod.def,s=Fe(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const o in n){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);n[o]&&delete i[o]}return xe(this,"shape",i),i},checks:[]});return je(t,s)}function Qr(t,n){if(!Ze(n))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Fe(t._zod.def,{get shape(){const o={...t._zod.def.shape,...n};return xe(this,"shape",o),o},checks:[]});return je(t,i)}function es(t,n){if(!Ze(n))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...t._zod.def,get shape(){const s={...t._zod.def.shape,...n};return xe(this,"shape",s),s},checks:t._zod.def.checks};return je(t,r)}function ts(t,n){const r=Fe(t._zod.def,{get shape(){const s={...t._zod.def.shape,...n._zod.def.shape};return xe(this,"shape",s),s},get catchall(){return n._zod.def.catchall},checks:[]});return je(t,r)}function ns(t,n,r){const s=Fe(n._zod.def,{get shape(){const i=n._zod.def.shape,o={...i};if(r)for(const a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=t?new t({type:"optional",innerType:i[a]}):i[a])}else for(const a in i)o[a]=t?new t({type:"optional",innerType:i[a]}):i[a];return xe(this,"shape",o),o},checks:[]});return je(n,s)}function rs(t,n,r){const s=Fe(n._zod.def,{get shape(){const i=n._zod.def.shape,o={...i};if(r)for(const a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=new t({type:"nonoptional",innerType:i[a]}))}else for(const a in i)o[a]=new t({type:"nonoptional",innerType:i[a]});return xe(this,"shape",o),o},checks:[]});return je(n,s)}function ze(t,n=0){if(t.aborted===!0)return!0;for(let r=n;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function gn(t,n){return n.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(t),r})}function Ne(t){return typeof t=="string"?t:t?.message}function we(t,n,r){const s={...t,path:t.path??[]};if(!t.message){const i=Ne(t.inst?._zod.def?.error?.(t))??Ne(n?.error?.(t))??Ne(r.customError?.(t))??Ne(r.localeError?.(t))??"Invalid input";s.message=i}return delete s.inst,delete s.continue,n?.reportInput||delete s.input,s}function jt(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Pe(...t){const[n,r,s]=t;return typeof n=="string"?{message:n,code:"custom",input:r,inst:s}:{...n}}const fn=(t,n)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:n,enumerable:!1}),t.message=JSON.stringify(n,lt,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},xn=m("$ZodError",fn),jn=m("$ZodError",fn,{Parent:Error});function ss(t,n=r=>r.message){const r={},s=[];for(const i of t.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(n(i))):s.push(n(i));return{formErrors:s,fieldErrors:r}}function is(t,n){const r=n||function(o){return o.message},s={_errors:[]},i=o=>{for(const a of o.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(c=>i({issues:c}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)s._errors.push(r(a));else{let c=s,u=0;for(;u<a.path.length;){const f=a.path[u];u===a.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(r(a))):c[f]=c[f]||{_errors:[]},c=c[f],u++}}};return i(t),s}const yt=t=>(n,r,s,i)=>{const o=s?Object.assign(s,{async:!1}):{async:!1},a=n._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new _e;if(a.issues.length){const c=new(i?.Err??t)(a.issues.map(u=>we(u,o,ve())));throw pn(c,i?.callee),c}return a.value},bt=t=>async(n,r,s,i)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let a=n._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const c=new(i?.Err??t)(a.issues.map(u=>we(u,o,ve())));throw pn(c,i?.callee),c}return a.value},Qe=t=>(n,r,s)=>{const i=s?{...s,async:!1}:{async:!1},o=n._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new _e;return o.issues.length?{success:!1,error:new(t??xn)(o.issues.map(a=>we(a,i,ve())))}:{success:!0,data:o.value}},os=Qe(jn),et=t=>async(n,r,s)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=n._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(a=>we(a,i,ve())))}:{success:!0,data:o.value}},as=et(jn),cs=t=>(n,r,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return yt(t)(n,r,i)},ls=t=>(n,r,s)=>yt(t)(n,r,s),ds=t=>async(n,r,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return bt(t)(n,r,i)},us=t=>async(n,r,s)=>bt(t)(n,r,s),hs=t=>(n,r,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Qe(t)(n,r,i)},ps=t=>(n,r,s)=>Qe(t)(n,r,s),ms=t=>async(n,r,s)=>{const i=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return et(t)(n,r,i)},gs=t=>async(n,r,s)=>et(t)(n,r,s),fs=/^[cC][^\s-]{8,}$/,xs=/^[0-9a-z]+$/,js=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ys=/^[0-9a-vA-V]{20}$/,bs=/^[A-Za-z0-9]{27}$/,vs=/^[a-zA-Z0-9_-]{21}$/,ws=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ss=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Pt=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,zs=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_s="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function As(){return new RegExp(_s,"u")}const ks=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fs=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Cs=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ts=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$s=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,yn=/^[A-Za-z0-9_-]*$/,Es=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Is=/^\+(?:[0-9]){6,14}[0-9]$/,bn="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Zs=new RegExp(`^${bn}$`);function vn(t){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${n}`:t.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${t.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ps(t){return new RegExp(`^${vn(t)}$`)}function Rs(t){const n=vn({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${n}(?:${r.join("|")})`;return new RegExp(`^${bn}T(?:${s})$`)}const Ds=t=>{const n=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},Os=/^-?\d+$/,Ls=/^-?\d+(?:\.\d+)?/,Ms=/^[^A-Z]*$/,Vs=/^[^a-z]*$/,ne=m("$ZodCheck",(t,n)=>{var r;t._zod??(t._zod={}),t._zod.def=n,(r=t._zod).onattach??(r.onattach=[])}),wn={number:"number",bigint:"bigint",object:"date"},Sn=m("$ZodCheckLessThan",(t,n)=>{ne.init(t,n);const r=wn[typeof n.value];t._zod.onattach.push(s=>{const i=s._zod.bag,o=(n.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<o&&(n.inclusive?i.maximum=n.value:i.exclusiveMaximum=n.value)}),t._zod.check=s=>{(n.inclusive?s.value<=n.value:s.value<n.value)||s.issues.push({origin:r,code:"too_big",maximum:n.value,input:s.value,inclusive:n.inclusive,inst:t,continue:!n.abort})}}),zn=m("$ZodCheckGreaterThan",(t,n)=>{ne.init(t,n);const r=wn[typeof n.value];t._zod.onattach.push(s=>{const i=s._zod.bag,o=(n.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>o&&(n.inclusive?i.minimum=n.value:i.exclusiveMinimum=n.value)}),t._zod.check=s=>{(n.inclusive?s.value>=n.value:s.value>n.value)||s.issues.push({origin:r,code:"too_small",minimum:n.value,input:s.value,inclusive:n.inclusive,inst:t,continue:!n.abort})}}),Ns=m("$ZodCheckMultipleOf",(t,n)=>{ne.init(t,n),t._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=n.value)}),t._zod.check=r=>{if(typeof r.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%n.value===BigInt(0):Wr(r.value,n.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:n.value,input:r.value,inst:t,continue:!n.abort})}}),Us=m("$ZodCheckNumberFormat",(t,n)=>{ne.init(t,n),n.format=n.format||"float64";const r=n.format?.includes("int"),s=r?"int":"number",[i,o]=Kr[n.format];t._zod.onattach.push(a=>{const c=a._zod.bag;c.format=n.format,c.minimum=i,c.maximum=o,r&&(c.pattern=Os)}),t._zod.check=a=>{const c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:s,format:n.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!n.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!n.abort});return}}c<i&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!n.abort}),c>o&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:t})}}),Bs=m("$ZodCheckMaxLength",(t,n)=>{var r;ne.init(t,n),(r=t._zod.def).when??(r.when=s=>{const i=s.value;return!ft(i)&&i.length!==void 0}),t._zod.onattach.push(s=>{const i=s._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<i&&(s._zod.bag.maximum=n.maximum)}),t._zod.check=s=>{const i=s.value;if(i.length<=n.maximum)return;const a=jt(i);s.issues.push({origin:a,code:"too_big",maximum:n.maximum,inclusive:!0,input:i,inst:t,continue:!n.abort})}}),Ws=m("$ZodCheckMinLength",(t,n)=>{var r;ne.init(t,n),(r=t._zod.def).when??(r.when=s=>{const i=s.value;return!ft(i)&&i.length!==void 0}),t._zod.onattach.push(s=>{const i=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>i&&(s._zod.bag.minimum=n.minimum)}),t._zod.check=s=>{const i=s.value;if(i.length>=n.minimum)return;const a=jt(i);s.issues.push({origin:a,code:"too_small",minimum:n.minimum,inclusive:!0,input:i,inst:t,continue:!n.abort})}}),Hs=m("$ZodCheckLengthEquals",(t,n)=>{var r;ne.init(t,n),(r=t._zod.def).when??(r.when=s=>{const i=s.value;return!ft(i)&&i.length!==void 0}),t._zod.onattach.push(s=>{const i=s._zod.bag;i.minimum=n.length,i.maximum=n.length,i.length=n.length}),t._zod.check=s=>{const i=s.value,o=i.length;if(o===n.length)return;const a=jt(i),c=o>n.length;s.issues.push({origin:a,...c?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!n.abort})}}),tt=m("$ZodCheckStringFormat",(t,n)=>{var r,s;ne.init(t,n),t._zod.onattach.push(i=>{const o=i._zod.bag;o.format=n.format,n.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(n.pattern))}),n.pattern?(r=t._zod).check??(r.check=i=>{n.pattern.lastIndex=0,!n.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:n.format,input:i.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:t,continue:!n.abort})}):(s=t._zod).check??(s.check=()=>{})}),qs=m("$ZodCheckRegex",(t,n)=>{tt.init(t,n),t._zod.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:n.pattern.toString(),inst:t,continue:!n.abort})}}),Gs=m("$ZodCheckLowerCase",(t,n)=>{n.pattern??(n.pattern=Ms),tt.init(t,n)}),Js=m("$ZodCheckUpperCase",(t,n)=>{n.pattern??(n.pattern=Vs),tt.init(t,n)}),Ks=m("$ZodCheckIncludes",(t,n)=>{ne.init(t,n);const r=Xe(n.includes),s=new RegExp(typeof n.position=="number"?`^.{${n.position}}${r}`:r);n.pattern=s,t._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(s)}),t._zod.check=i=>{i.value.includes(n.includes,n.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:i.value,inst:t,continue:!n.abort})}}),Ys=m("$ZodCheckStartsWith",(t,n)=>{ne.init(t,n);const r=new RegExp(`^${Xe(n.prefix)}.*`);n.pattern??(n.pattern=r),t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=s=>{s.value.startsWith(n.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:s.value,inst:t,continue:!n.abort})}}),Xs=m("$ZodCheckEndsWith",(t,n)=>{ne.init(t,n);const r=new RegExp(`.*${Xe(n.suffix)}$`);n.pattern??(n.pattern=r),t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=s=>{s.value.endsWith(n.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:s.value,inst:t,continue:!n.abort})}}),Qs=m("$ZodCheckOverwrite",(t,n)=>{ne.init(t,n),t._zod.check=r=>{r.value=n.tx(r.value)}});class ei{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const s=n.split(`
`).filter(a=>a),i=Math.min(...s.map(a=>a.length-a.trimStart().length)),o=s.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(const a of o)this.content.push(a)}compile(){const n=Function,r=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new n(...r,i.join(`
`))}}const ti={major:4,minor:1,patch:9},G=m("$ZodType",(t,n)=>{var r;t??(t={}),t._zod.def=n,t._zod.bag=t._zod.bag||{},t._zod.version=ti;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const i of s)for(const o of i._zod.onattach)o(t);if(s.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(a,c,u)=>{let f=ze(a),z;for(const A of c){if(A._zod.def.when){if(!A._zod.def.when(a))continue}else if(f)continue;const $=a.issues.length,E=A._zod.check(a);if(E instanceof Promise&&u?.async===!1)throw new _e;if(z||E instanceof Promise)z=(z??Promise.resolve()).then(async()=>{await E,a.issues.length!==$&&(f||(f=ze(a,$)))});else{if(a.issues.length===$)continue;f||(f=ze(a,$))}}return z?z.then(()=>a):a},o=(a,c,u)=>{if(ze(a))return a.aborted=!0,a;const f=i(c,s,u);if(f instanceof Promise){if(u.async===!1)throw new _e;return f.then(z=>t._zod.parse(z,u))}return t._zod.parse(f,u)};t._zod.run=(a,c)=>{if(c.skipChecks)return t._zod.parse(a,c);if(c.direction==="backward"){const f=t._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return f instanceof Promise?f.then(z=>o(z,a,c)):o(f,a,c)}const u=t._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new _e;return u.then(f=>i(f,s,c))}return i(u,s,c)}}t["~standard"]={validate:i=>{try{const o=os(t,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return as(t,i).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),vt=m("$ZodString",(t,n)=>{G.init(t,n),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??Ds(t._zod.bag),t._zod.parse=(r,s)=>{if(n.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),M=m("$ZodStringFormat",(t,n)=>{tt.init(t,n),vt.init(t,n)}),ni=m("$ZodGUID",(t,n)=>{n.pattern??(n.pattern=Ss),M.init(t,n)}),ri=m("$ZodUUID",(t,n)=>{if(n.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(s===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=Pt(s))}else n.pattern??(n.pattern=Pt());M.init(t,n)}),si=m("$ZodEmail",(t,n)=>{n.pattern??(n.pattern=zs),M.init(t,n)}),ii=m("$ZodURL",(t,n)=>{M.init(t,n),t._zod.check=r=>{try{const s=r.value.trim(),i=new URL(s);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Es.source,input:r.value,inst:t,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:r.value,inst:t,continue:!n.abort})),n.normalize?r.value=i.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!n.abort})}}}),oi=m("$ZodEmoji",(t,n)=>{n.pattern??(n.pattern=As()),M.init(t,n)}),ai=m("$ZodNanoID",(t,n)=>{n.pattern??(n.pattern=vs),M.init(t,n)}),ci=m("$ZodCUID",(t,n)=>{n.pattern??(n.pattern=fs),M.init(t,n)}),li=m("$ZodCUID2",(t,n)=>{n.pattern??(n.pattern=xs),M.init(t,n)}),di=m("$ZodULID",(t,n)=>{n.pattern??(n.pattern=js),M.init(t,n)}),ui=m("$ZodXID",(t,n)=>{n.pattern??(n.pattern=ys),M.init(t,n)}),hi=m("$ZodKSUID",(t,n)=>{n.pattern??(n.pattern=bs),M.init(t,n)}),pi=m("$ZodISODateTime",(t,n)=>{n.pattern??(n.pattern=Rs(n)),M.init(t,n)}),mi=m("$ZodISODate",(t,n)=>{n.pattern??(n.pattern=Zs),M.init(t,n)}),gi=m("$ZodISOTime",(t,n)=>{n.pattern??(n.pattern=Ps(n)),M.init(t,n)}),fi=m("$ZodISODuration",(t,n)=>{n.pattern??(n.pattern=ws),M.init(t,n)}),xi=m("$ZodIPv4",(t,n)=>{n.pattern??(n.pattern=ks),M.init(t,n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),ji=m("$ZodIPv6",(t,n)=>{n.pattern??(n.pattern=Fs),M.init(t,n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!n.abort})}}}),yi=m("$ZodCIDRv4",(t,n)=>{n.pattern??(n.pattern=Cs),M.init(t,n)}),bi=m("$ZodCIDRv6",(t,n)=>{n.pattern??(n.pattern=Ts),M.init(t,n),t._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[i,o]=s;if(!o)throw new Error;const a=Number(o);if(`${a}`!==o)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!n.abort})}}});function _n(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const vi=m("$ZodBase64",(t,n)=>{n.pattern??(n.pattern=$s),M.init(t,n),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{_n(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!n.abort})}});function wi(t){if(!yn.test(t))return!1;const n=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=n.padEnd(Math.ceil(n.length/4)*4,"=");return _n(r)}const Si=m("$ZodBase64URL",(t,n)=>{n.pattern??(n.pattern=yn),M.init(t,n),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{wi(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!n.abort})}}),zi=m("$ZodE164",(t,n)=>{n.pattern??(n.pattern=Is),M.init(t,n)});function _i(t,n=null){try{const r=t.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const i=JSON.parse(atob(s));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||n&&(!("alg"in i)||i.alg!==n))}catch{return!1}}const Ai=m("$ZodJWT",(t,n)=>{M.init(t,n),t._zod.check=r=>{_i(r.value,n.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!n.abort})}}),An=m("$ZodNumber",(t,n)=>{G.init(t,n),t._zod.pattern=t._zod.bag.pattern??Ls,t._zod.parse=(r,s)=>{if(n.coerce)try{r.value=Number(r.value)}catch{}const i=r.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return r;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...o?{received:o}:{}}),r}}),ki=m("$ZodNumber",(t,n)=>{Us.init(t,n),An.init(t,n)}),Fi=m("$ZodUnknown",(t,n)=>{G.init(t,n),t._zod.parse=r=>r}),Ci=m("$ZodNever",(t,n)=>{G.init(t,n),t._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Rt(t,n,r){t.issues.length&&n.issues.push(...gn(r,t.issues)),n.value[r]=t.value}const Ti=m("$ZodArray",(t,n)=>{G.init(t,n),t._zod.parse=(r,s)=>{const i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),r;r.value=Array(i.length);const o=[];for(let a=0;a<i.length;a++){const c=i[a],u=n.element._zod.run({value:c,issues:[]},s);u instanceof Promise?o.push(u.then(f=>Rt(f,r,a))):Rt(u,r,a)}return o.length?Promise.all(o).then(()=>r):r}});function Ke(t,n,r,s){t.issues.length&&n.issues.push(...gn(r,t.issues)),t.value===void 0?r in s&&(n.value[r]=void 0):n.value[r]=t.value}function kn(t){const n=Object.keys(t.shape);for(const s of n)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const r=Jr(t.shape);return{...t,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(r)}}function Fn(t,n,r,s,i,o){const a=[],c=i.keySet,u=i.catchall._zod,f=u.def.type;for(const z of Object.keys(n)){if(c.has(z))continue;if(f==="never"){a.push(z);continue}const A=u.run({value:n[z],issues:[]},s);A instanceof Promise?t.push(A.then($=>Ke($,r,z,n))):Ke(A,r,z,n)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:n,inst:o}),t.length?Promise.all(t).then(()=>r):r}const $i=m("$ZodObject",(t,n)=>{G.init(t,n);const r=gt(()=>kn(n));D(t._zod,"propValues",()=>{const a=n.shape,c={};for(const u in a){const f=a[u]._zod;if(f.values){c[u]??(c[u]=new Set);for(const z of f.values)c[u].add(z)}}return c});const s=Je,i=n.catchall;let o;t._zod.parse=(a,c)=>{o??(o=r.value);const u=a.value;if(!s(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),a;a.value={};const f=[],z=o.shape;for(const A of o.keys){const E=z[A]._zod.run({value:u[A],issues:[]},c);E instanceof Promise?f.push(E.then(P=>Ke(P,a,A,u))):Ke(E,a,A,u)}return i?Fn(f,u,a,c,r.value,t):f.length?Promise.all(f).then(()=>a):a}}),Ei=m("$ZodObjectJIT",(t,n)=>{$i.init(t,n);const r=t._zod.parse,s=gt(()=>kn(n)),i=$=>{const E=new ei(["shape","payload","ctx"]),P=s.value,U=h=>{const j=Zt(h);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};E.write("const input = payload.value;");const Z=Object.create(null);let H=0;for(const h of P.keys)Z[h]=`key_${H++}`;E.write("const newResult = {};");for(const h of P.keys){const j=Z[h],y=Zt(h);E.write(`const ${j} = ${U(h)};`),E.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${y}, ...iss.path] : [${y}]
          })));
        }
        
        
        if (${j}.value === undefined) {
          if (${y} in input) {
            newResult[${y}] = undefined;
          }
        } else {
          newResult[${y}] = ${j}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const g=E.compile();return(h,j)=>g($,h,j)};let o;const a=Je,c=!hn.jitless,f=c&&qr.value,z=n.catchall;let A;t._zod.parse=($,E)=>{A??(A=s.value);const P=$.value;return a(P)?c&&f&&E?.async===!1&&E.jitless!==!0?(o||(o=i(n.shape)),$=o($,E),z?Fn([],P,$,E,A,t):$):r($,E):($.issues.push({expected:"object",code:"invalid_type",input:P,inst:t}),$)}});function Dt(t,n,r,s){for(const o of t)if(o.issues.length===0)return n.value=o.value,n;const i=t.filter(o=>!ze(o));return i.length===1?(n.value=i[0].value,i[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:r,errors:t.map(o=>o.issues.map(a=>we(a,s,ve())))}),n)}const Ii=m("$ZodUnion",(t,n)=>{G.init(t,n),D(t._zod,"optin",()=>n.options.some(i=>i._zod.optin==="optional")?"optional":void 0),D(t._zod,"optout",()=>n.options.some(i=>i._zod.optout==="optional")?"optional":void 0),D(t._zod,"values",()=>{if(n.options.every(i=>i._zod.values))return new Set(n.options.flatMap(i=>Array.from(i._zod.values)))}),D(t._zod,"pattern",()=>{if(n.options.every(i=>i._zod.pattern)){const i=n.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>xt(o.source)).join("|")})$`)}});const r=n.options.length===1,s=n.options[0]._zod.run;t._zod.parse=(i,o)=>{if(r)return s(i,o);let a=!1;const c=[];for(const u of n.options){const f=u._zod.run({value:i.value,issues:[]},o);if(f instanceof Promise)c.push(f),a=!0;else{if(f.issues.length===0)return f;c.push(f)}}return a?Promise.all(c).then(u=>Dt(u,i,t,o)):Dt(c,i,t,o)}}),Zi=m("$ZodIntersection",(t,n)=>{G.init(t,n),t._zod.parse=(r,s)=>{const i=r.value,o=n.left._zod.run({value:i,issues:[]},s),a=n.right._zod.run({value:i,issues:[]},s);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([u,f])=>Ot(r,u,f)):Ot(r,o,a)}});function dt(t,n){if(t===n)return{valid:!0,data:t};if(t instanceof Date&&n instanceof Date&&+t==+n)return{valid:!0,data:t};if(Ze(t)&&Ze(n)){const r=Object.keys(n),s=Object.keys(t).filter(o=>r.indexOf(o)!==-1),i={...t,...n};for(const o of s){const a=dt(t[o],n[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};i[o]=a.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<t.length;s++){const i=t[s],o=n[s],a=dt(i,o);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Ot(t,n,r){if(n.issues.length&&t.issues.push(...n.issues),r.issues.length&&t.issues.push(...r.issues),ze(t))return t;const s=dt(n.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const Pi=m("$ZodEnum",(t,n)=>{G.init(t,n);const r=Br(n.entries),s=new Set(r);t._zod.values=s,t._zod.pattern=new RegExp(`^(${r.filter(i=>Gr.has(typeof i)).map(i=>typeof i=="string"?Xe(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{const a=i.value;return s.has(a)||i.issues.push({code:"invalid_value",values:r,input:a,inst:t}),i}}),Ri=m("$ZodTransform",(t,n)=>{G.init(t,n),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new un(t.constructor.name);const i=n.transform(r.value,r);if(s.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(r.value=a,r));if(i instanceof Promise)throw new _e;return r.value=i,r}});function Lt(t,n){return t.issues.length&&n===void 0?{issues:[],value:void 0}:t}const Di=m("$ZodOptional",(t,n)=>{G.init(t,n),t._zod.optin="optional",t._zod.optout="optional",D(t._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),D(t._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${xt(r.source)})?$`):void 0}),t._zod.parse=(r,s)=>{if(n.innerType._zod.optin==="optional"){const i=n.innerType._zod.run(r,s);return i instanceof Promise?i.then(o=>Lt(o,r.value)):Lt(i,r.value)}return r.value===void 0?r:n.innerType._zod.run(r,s)}}),Oi=m("$ZodNullable",(t,n)=>{G.init(t,n),D(t._zod,"optin",()=>n.innerType._zod.optin),D(t._zod,"optout",()=>n.innerType._zod.optout),D(t._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${xt(r.source)}|null)$`):void 0}),D(t._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),t._zod.parse=(r,s)=>r.value===null?r:n.innerType._zod.run(r,s)}),Li=m("$ZodDefault",(t,n)=>{G.init(t,n),t._zod.optin="optional",D(t._zod,"values",()=>n.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return n.innerType._zod.run(r,s);if(r.value===void 0)return r.value=n.defaultValue,r;const i=n.innerType._zod.run(r,s);return i instanceof Promise?i.then(o=>Mt(o,n)):Mt(i,n)}});function Mt(t,n){return t.value===void 0&&(t.value=n.defaultValue),t}const Mi=m("$ZodPrefault",(t,n)=>{G.init(t,n),t._zod.optin="optional",D(t._zod,"values",()=>n.innerType._zod.values),t._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=n.defaultValue),n.innerType._zod.run(r,s))}),Vi=m("$ZodNonOptional",(t,n)=>{G.init(t,n),D(t._zod,"values",()=>{const r=n.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),t._zod.parse=(r,s)=>{const i=n.innerType._zod.run(r,s);return i instanceof Promise?i.then(o=>Vt(o,t)):Vt(i,t)}});function Vt(t,n){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:n}),t}const Ni=m("$ZodCatch",(t,n)=>{G.init(t,n),D(t._zod,"optin",()=>n.innerType._zod.optin),D(t._zod,"optout",()=>n.innerType._zod.optout),D(t._zod,"values",()=>n.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return n.innerType._zod.run(r,s);const i=n.innerType._zod.run(r,s);return i instanceof Promise?i.then(o=>(r.value=o.value,o.issues.length&&(r.value=n.catchValue({...r,error:{issues:o.issues.map(a=>we(a,s,ve()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=n.catchValue({...r,error:{issues:i.issues.map(o=>we(o,s,ve()))},input:r.value}),r.issues=[]),r)}}),Ui=m("$ZodPipe",(t,n)=>{G.init(t,n),D(t._zod,"values",()=>n.in._zod.values),D(t._zod,"optin",()=>n.in._zod.optin),D(t._zod,"optout",()=>n.out._zod.optout),D(t._zod,"propValues",()=>n.in._zod.propValues),t._zod.parse=(r,s)=>{if(s.direction==="backward"){const o=n.out._zod.run(r,s);return o instanceof Promise?o.then(a=>Ue(a,n.in,s)):Ue(o,n.in,s)}const i=n.in._zod.run(r,s);return i instanceof Promise?i.then(o=>Ue(o,n.out,s)):Ue(i,n.out,s)}});function Ue(t,n,r){return t.issues.length?(t.aborted=!0,t):n._zod.run({value:t.value,issues:t.issues},r)}const Bi=m("$ZodReadonly",(t,n)=>{G.init(t,n),D(t._zod,"propValues",()=>n.innerType._zod.propValues),D(t._zod,"values",()=>n.innerType._zod.values),D(t._zod,"optin",()=>n.innerType._zod.optin),D(t._zod,"optout",()=>n.innerType._zod.optout),t._zod.parse=(r,s)=>{if(s.direction==="backward")return n.innerType._zod.run(r,s);const i=n.innerType._zod.run(r,s);return i instanceof Promise?i.then(Nt):Nt(i)}});function Nt(t){return t.value=Object.freeze(t.value),t}const Wi=m("$ZodCustom",(t,n)=>{ne.init(t,n),G.init(t,n),t._zod.parse=(r,s)=>r,t._zod.check=r=>{const s=r.value,i=n.fn(s);if(i instanceof Promise)return i.then(o=>Ut(o,r,s,t));Ut(i,r,s,t)}});function Ut(t,n,r,s){if(!t){const i={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(i.params=s._zod.def.params),n.issues.push(Pe(i))}}class Hi{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...r){const s=r[0];if(this._map.set(n,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const r=this._map.get(n);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(n),this}get(n){const r=n._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const i={...s,...this._map.get(n)};return Object.keys(i).length?i:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function qi(){return new Hi}const Be=qi();function Gi(t,n){return new t({type:"string",...k(n)})}function Cn(t,n){return new t({type:"string",format:"email",check:"string_format",abort:!1,...k(n)})}function Bt(t,n){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...k(n)})}function Ji(t,n){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...k(n)})}function Ki(t,n){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...k(n)})}function Yi(t,n){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...k(n)})}function Xi(t,n){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...k(n)})}function Qi(t,n){return new t({type:"string",format:"url",check:"string_format",abort:!1,...k(n)})}function eo(t,n){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...k(n)})}function to(t,n){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...k(n)})}function no(t,n){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...k(n)})}function ro(t,n){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...k(n)})}function so(t,n){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...k(n)})}function io(t,n){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...k(n)})}function oo(t,n){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...k(n)})}function ao(t,n){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...k(n)})}function co(t,n){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...k(n)})}function lo(t,n){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...k(n)})}function uo(t,n){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...k(n)})}function ho(t,n){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...k(n)})}function po(t,n){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...k(n)})}function mo(t,n){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...k(n)})}function go(t,n){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...k(n)})}function fo(t,n){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...k(n)})}function xo(t,n){return new t({type:"string",format:"date",check:"string_format",...k(n)})}function jo(t,n){return new t({type:"string",format:"time",check:"string_format",precision:null,...k(n)})}function yo(t,n){return new t({type:"string",format:"duration",check:"string_format",...k(n)})}function bo(t,n){return new t({type:"number",checks:[],...k(n)})}function vo(t,n){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...k(n)})}function wo(t){return new t({type:"unknown"})}function So(t,n){return new t({type:"never",...k(n)})}function Wt(t,n){return new Sn({check:"less_than",...k(n),value:t,inclusive:!1})}function at(t,n){return new Sn({check:"less_than",...k(n),value:t,inclusive:!0})}function Ht(t,n){return new zn({check:"greater_than",...k(n),value:t,inclusive:!1})}function ct(t,n){return new zn({check:"greater_than",...k(n),value:t,inclusive:!0})}function qt(t,n){return new Ns({check:"multiple_of",...k(n),value:t})}function Tn(t,n){return new Bs({check:"max_length",...k(n),maximum:t})}function Ye(t,n){return new Ws({check:"min_length",...k(n),minimum:t})}function $n(t,n){return new Hs({check:"length_equals",...k(n),length:t})}function zo(t,n){return new qs({check:"string_format",format:"regex",...k(n),pattern:t})}function _o(t){return new Gs({check:"string_format",format:"lowercase",...k(t)})}function Ao(t){return new Js({check:"string_format",format:"uppercase",...k(t)})}function ko(t,n){return new Ks({check:"string_format",format:"includes",...k(n),includes:t})}function Fo(t,n){return new Ys({check:"string_format",format:"starts_with",...k(n),prefix:t})}function Co(t,n){return new Xs({check:"string_format",format:"ends_with",...k(n),suffix:t})}function Re(t){return new Qs({check:"overwrite",tx:t})}function To(t){return Re(n=>n.normalize(t))}function $o(){return Re(t=>t.trim())}function Eo(){return Re(t=>t.toLowerCase())}function Io(){return Re(t=>t.toUpperCase())}function Zo(t,n,r){return new t({type:"array",element:n,...k(r)})}function Po(t,n,r){return new t({type:"custom",check:"custom",fn:n,...k(r)})}function Ro(t){const n=Do(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Pe(s,r.value,n._zod.def));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=n),i.continue??(i.continue=!n._zod.def.abort),r.issues.push(Pe(i))}},t(r.value,r)));return n}function Do(t,n){const r=new ne({check:"custom",...k(n)});return r._zod.check=t,r}const Oo=m("ZodISODateTime",(t,n)=>{pi.init(t,n),N.init(t,n)});function Lo(t){return fo(Oo,t)}const Mo=m("ZodISODate",(t,n)=>{mi.init(t,n),N.init(t,n)});function Vo(t){return xo(Mo,t)}const No=m("ZodISOTime",(t,n)=>{gi.init(t,n),N.init(t,n)});function Uo(t){return jo(No,t)}const Bo=m("ZodISODuration",(t,n)=>{fi.init(t,n),N.init(t,n)});function Wo(t){return yo(Bo,t)}const Ho=(t,n)=>{xn.init(t,n),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>is(t,r)},flatten:{value:r=>ss(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,lt,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,lt,2)}},isEmpty:{get(){return t.issues.length===0}}})},oe=m("ZodError",Ho,{Parent:Error}),qo=yt(oe),Go=bt(oe),Jo=Qe(oe),Ko=et(oe),Yo=cs(oe),Xo=ls(oe),Qo=ds(oe),ea=us(oe),ta=hs(oe),na=ps(oe),ra=ms(oe),sa=gs(oe),J=m("ZodType",(t,n)=>(G.init(t,n),t.def=n,t.type=n.type,Object.defineProperty(t,"_def",{value:n}),t.check=(...r)=>t.clone({...n,checks:[...n.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),t.clone=(r,s)=>je(t,r,s),t.brand=()=>t,t.register=((r,s)=>(r.add(t,s),t)),t.parse=(r,s)=>qo(t,r,s,{callee:t.parse}),t.safeParse=(r,s)=>Jo(t,r,s),t.parseAsync=async(r,s)=>Go(t,r,s,{callee:t.parseAsync}),t.safeParseAsync=async(r,s)=>Ko(t,r,s),t.spa=t.safeParseAsync,t.encode=(r,s)=>Yo(t,r,s),t.decode=(r,s)=>Xo(t,r,s),t.encodeAsync=async(r,s)=>Qo(t,r,s),t.decodeAsync=async(r,s)=>ea(t,r,s),t.safeEncode=(r,s)=>ta(t,r,s),t.safeDecode=(r,s)=>na(t,r,s),t.safeEncodeAsync=async(r,s)=>ra(t,r,s),t.safeDecodeAsync=async(r,s)=>sa(t,r,s),t.refine=(r,s)=>t.check(Ga(r,s)),t.superRefine=r=>t.check(Ja(r)),t.overwrite=r=>t.check(Re(r)),t.optional=()=>Yt(t),t.nullable=()=>Xt(t),t.nullish=()=>Yt(Xt(t)),t.nonoptional=r=>Va(t,r),t.array=()=>Pn(t),t.or=r=>Ta([t,r]),t.and=r=>Ea(t,r),t.transform=r=>Qt(t,Pa(r)),t.default=r=>Oa(t,r),t.prefault=r=>Ma(t,r),t.catch=r=>Ua(t,r),t.pipe=r=>Qt(t,r),t.readonly=()=>Ha(t),t.describe=r=>{const s=t.clone();return Be.add(s,{description:r}),s},Object.defineProperty(t,"description",{get(){return Be.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Be.get(t);const s=t.clone();return Be.add(s,r[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),En=m("_ZodString",(t,n)=>{vt.init(t,n),J.init(t,n);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...s)=>t.check(zo(...s)),t.includes=(...s)=>t.check(ko(...s)),t.startsWith=(...s)=>t.check(Fo(...s)),t.endsWith=(...s)=>t.check(Co(...s)),t.min=(...s)=>t.check(Ye(...s)),t.max=(...s)=>t.check(Tn(...s)),t.length=(...s)=>t.check($n(...s)),t.nonempty=(...s)=>t.check(Ye(1,...s)),t.lowercase=s=>t.check(_o(s)),t.uppercase=s=>t.check(Ao(s)),t.trim=()=>t.check($o()),t.normalize=(...s)=>t.check(To(...s)),t.toLowerCase=()=>t.check(Eo()),t.toUpperCase=()=>t.check(Io())}),ia=m("ZodString",(t,n)=>{vt.init(t,n),En.init(t,n),t.email=r=>t.check(Cn(In,r)),t.url=r=>t.check(Qi(aa,r)),t.jwt=r=>t.check(go(wa,r)),t.emoji=r=>t.check(eo(ca,r)),t.guid=r=>t.check(Bt(Gt,r)),t.uuid=r=>t.check(Ji(We,r)),t.uuidv4=r=>t.check(Ki(We,r)),t.uuidv6=r=>t.check(Yi(We,r)),t.uuidv7=r=>t.check(Xi(We,r)),t.nanoid=r=>t.check(to(la,r)),t.guid=r=>t.check(Bt(Gt,r)),t.cuid=r=>t.check(no(da,r)),t.cuid2=r=>t.check(ro(ua,r)),t.ulid=r=>t.check(so(ha,r)),t.base64=r=>t.check(ho(ya,r)),t.base64url=r=>t.check(po(ba,r)),t.xid=r=>t.check(io(pa,r)),t.ksuid=r=>t.check(oo(ma,r)),t.ipv4=r=>t.check(ao(ga,r)),t.ipv6=r=>t.check(co(fa,r)),t.cidrv4=r=>t.check(lo(xa,r)),t.cidrv6=r=>t.check(uo(ja,r)),t.e164=r=>t.check(mo(va,r)),t.datetime=r=>t.check(Lo(r)),t.date=r=>t.check(Vo(r)),t.time=r=>t.check(Uo(r)),t.duration=r=>t.check(Wo(r))});function ut(t){return Gi(ia,t)}const N=m("ZodStringFormat",(t,n)=>{M.init(t,n),En.init(t,n)}),In=m("ZodEmail",(t,n)=>{si.init(t,n),N.init(t,n)});function oa(t){return Cn(In,t)}const Gt=m("ZodGUID",(t,n)=>{ni.init(t,n),N.init(t,n)}),We=m("ZodUUID",(t,n)=>{ri.init(t,n),N.init(t,n)}),aa=m("ZodURL",(t,n)=>{ii.init(t,n),N.init(t,n)}),ca=m("ZodEmoji",(t,n)=>{oi.init(t,n),N.init(t,n)}),la=m("ZodNanoID",(t,n)=>{ai.init(t,n),N.init(t,n)}),da=m("ZodCUID",(t,n)=>{ci.init(t,n),N.init(t,n)}),ua=m("ZodCUID2",(t,n)=>{li.init(t,n),N.init(t,n)}),ha=m("ZodULID",(t,n)=>{di.init(t,n),N.init(t,n)}),pa=m("ZodXID",(t,n)=>{ui.init(t,n),N.init(t,n)}),ma=m("ZodKSUID",(t,n)=>{hi.init(t,n),N.init(t,n)}),ga=m("ZodIPv4",(t,n)=>{xi.init(t,n),N.init(t,n)}),fa=m("ZodIPv6",(t,n)=>{ji.init(t,n),N.init(t,n)}),xa=m("ZodCIDRv4",(t,n)=>{yi.init(t,n),N.init(t,n)}),ja=m("ZodCIDRv6",(t,n)=>{bi.init(t,n),N.init(t,n)}),ya=m("ZodBase64",(t,n)=>{vi.init(t,n),N.init(t,n)}),ba=m("ZodBase64URL",(t,n)=>{Si.init(t,n),N.init(t,n)}),va=m("ZodE164",(t,n)=>{zi.init(t,n),N.init(t,n)}),wa=m("ZodJWT",(t,n)=>{Ai.init(t,n),N.init(t,n)}),Zn=m("ZodNumber",(t,n)=>{An.init(t,n),J.init(t,n),t.gt=(s,i)=>t.check(Ht(s,i)),t.gte=(s,i)=>t.check(ct(s,i)),t.min=(s,i)=>t.check(ct(s,i)),t.lt=(s,i)=>t.check(Wt(s,i)),t.lte=(s,i)=>t.check(at(s,i)),t.max=(s,i)=>t.check(at(s,i)),t.int=s=>t.check(Jt(s)),t.safe=s=>t.check(Jt(s)),t.positive=s=>t.check(Ht(0,s)),t.nonnegative=s=>t.check(ct(0,s)),t.negative=s=>t.check(Wt(0,s)),t.nonpositive=s=>t.check(at(0,s)),t.multipleOf=(s,i)=>t.check(qt(s,i)),t.step=(s,i)=>t.check(qt(s,i)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function ht(t){return bo(Zn,t)}const Sa=m("ZodNumberFormat",(t,n)=>{ki.init(t,n),Zn.init(t,n)});function Jt(t){return vo(Sa,t)}const za=m("ZodUnknown",(t,n)=>{Fi.init(t,n),J.init(t,n)});function Kt(){return wo(za)}const _a=m("ZodNever",(t,n)=>{Ci.init(t,n),J.init(t,n)});function Aa(t){return So(_a,t)}const ka=m("ZodArray",(t,n)=>{Ti.init(t,n),J.init(t,n),t.element=n.element,t.min=(r,s)=>t.check(Ye(r,s)),t.nonempty=r=>t.check(Ye(1,r)),t.max=(r,s)=>t.check(Tn(r,s)),t.length=(r,s)=>t.check($n(r,s)),t.unwrap=()=>t.element});function Pn(t,n){return Zo(ka,t,n)}const Fa=m("ZodObject",(t,n)=>{Ei.init(t,n),J.init(t,n),D(t,"shape",()=>n.shape),t.keyof=()=>Ia(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Kt()}),t.loose=()=>t.clone({...t._zod.def,catchall:Kt()}),t.strict=()=>t.clone({...t._zod.def,catchall:Aa()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>Qr(t,r),t.safeExtend=r=>es(t,r),t.merge=r=>ts(t,r),t.pick=r=>Yr(t,r),t.omit=r=>Xr(t,r),t.partial=(...r)=>ns(Dn,t,r[0]),t.required=(...r)=>rs(On,t,r[0])});function Rn(t,n){const r={type:"object",get shape(){return xe(this,"shape",t?Hr(t):{}),this.shape},...k(n)};return new Fa(r)}const Ca=m("ZodUnion",(t,n)=>{Ii.init(t,n),J.init(t,n),t.options=n.options});function Ta(t,n){return new Ca({type:"union",options:t,...k(n)})}const $a=m("ZodIntersection",(t,n)=>{Zi.init(t,n),J.init(t,n)});function Ea(t,n){return new $a({type:"intersection",left:t,right:n})}const pt=m("ZodEnum",(t,n)=>{Pi.init(t,n),J.init(t,n),t.enum=n.entries,t.options=Object.values(n.entries);const r=new Set(Object.keys(n.entries));t.extract=(s,i)=>{const o={};for(const a of s)if(r.has(a))o[a]=n.entries[a];else throw new Error(`Key ${a} not found in enum`);return new pt({...n,checks:[],...k(i),entries:o})},t.exclude=(s,i)=>{const o={...n.entries};for(const a of s)if(r.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new pt({...n,checks:[],...k(i),entries:o})}});function Ia(t,n){const r=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new pt({type:"enum",entries:r,...k(n)})}const Za=m("ZodTransform",(t,n)=>{Ri.init(t,n),J.init(t,n),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new un(t.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(Pe(o,r.value,n));else{const a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(Pe(a))}};const i=n.transform(r.value,r);return i instanceof Promise?i.then(o=>(r.value=o,r)):(r.value=i,r)}});function Pa(t){return new Za({type:"transform",transform:t})}const Dn=m("ZodOptional",(t,n)=>{Di.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType});function Yt(t){return new Dn({type:"optional",innerType:t})}const Ra=m("ZodNullable",(t,n)=>{Oi.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType});function Xt(t){return new Ra({type:"nullable",innerType:t})}const Da=m("ZodDefault",(t,n)=>{Li.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Oa(t,n){return new Da({type:"default",innerType:t,get defaultValue(){return typeof n=="function"?n():mn(n)}})}const La=m("ZodPrefault",(t,n)=>{Mi.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType});function Ma(t,n){return new La({type:"prefault",innerType:t,get defaultValue(){return typeof n=="function"?n():mn(n)}})}const On=m("ZodNonOptional",(t,n)=>{Vi.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType});function Va(t,n){return new On({type:"nonoptional",innerType:t,...k(n)})}const Na=m("ZodCatch",(t,n)=>{Ni.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Ua(t,n){return new Na({type:"catch",innerType:t,catchValue:typeof n=="function"?n:()=>n})}const Ba=m("ZodPipe",(t,n)=>{Ui.init(t,n),J.init(t,n),t.in=n.in,t.out=n.out});function Qt(t,n){return new Ba({type:"pipe",in:t,out:n})}const Wa=m("ZodReadonly",(t,n)=>{Bi.init(t,n),J.init(t,n),t.unwrap=()=>t._zod.def.innerType});function Ha(t){return new Wa({type:"readonly",innerType:t})}const qa=m("ZodCustom",(t,n)=>{Wi.init(t,n),J.init(t,n)});function Ga(t,n={}){return Po(qa,t,n)}function Ja(t){return Ro(t)}Rn({name:ut(),age:ht,email:oa()});const Ka=()=>"";Rn({count:ht().int(),history:Pn(ut()),multiplier:ht().int().min(1),qualityMessage:ut()});const Ya=()=>"",V=({title:t,children:n,code:r,snippetName:s,snippetFolder:i,language:o="typescript",codeTitle:a,titleSize:c="sm",titleAsCode:u=!1,codeColorScheme:f="",ts:z=!1})=>{const A=r||s;return ce.useEffect(()=>{A&&typeof window<"u"&&window.Prism&&setTimeout(()=>{window.Prism.highlightAll()},100)},[A,s,r]),e.jsxs(d,{children:[e.jsx(p,{size:c,layerStyle:"methodSignature",children:u?e.jsx(O,{fontSize:"sm",colorScheme:f,mb:1,children:t}):t}),e.jsx(l,{textStyle:"body",fontSize:u?"sm":void 0,color:u?"gray.600":void 0,mt:u?1:3,children:n}),A&&e.jsx(d,{mt:4,children:s?e.jsxs(d,{children:[a&&e.jsx(l,{fontSize:"sm",fontWeight:"medium",mb:2,color:"gray.700",children:a}),e.jsx(Y,{snippetName:s,folder:i,language:o,ts:z})]}):e.jsx(se,{language:o,title:a,children:r})})]})},Xa=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{children:[e.jsxs(p,{size:"xl",mb:4,children:["Actions & State Management",e.jsx(S,{ml:3,colorScheme:"forest",children:"Essential"})]}),e.jsx(l,{fontSize:"lg",color:"gray.600",children:"Learn how to define actions and manage state updates in Forestry 4."})]}),e.jsxs(W,{title:"Action Principles",children:[e.jsx(l,{color:"gray.600",children:"Understanding the core principles of actions will help you write better, more maintainable state management code."}),e.jsxs(le,{status:"warning",children:[e.jsx(de,{}),e.jsxs(w,{spacing:2,align:"stretch",children:[e.jsx(l,{fontSize:"sm",fontWeight:"bold",children:"ðŸš¨ Forestry is NOT Redux!"}),e.jsxs(l,{fontSize:"sm",children:["Actions don't return the next state iteration. State is changed imperatively with",e.jsx("code",{children:"next"}),", ",e.jsx("code",{children:"set"}),", and ",e.jsx("code",{children:"mutate"}),". Actions don't even have to return anything. When they do return values, it's useful data for the caller (summaries, composites, reporting) - not values that Forestry itself uses."]})]})]}),e.jsxs(le,{status:"info",children:[e.jsx(de,{}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Key Rule:"})," Actions must be functions or object methods - NOT arrow functions/lambdas. Arrow functions cannot be properly bound with ",e.jsx("code",{children:"call"})," and will lose their ",e.jsx("code",{children:"this"})," context."]})]}),e.jsx(p,{size:"md",children:"Why not use general functions?"}),e.jsx(w,{spacing:2,align:"stretch",children:e.jsxs(d,{layerStyle:"card",children:[`Actions are not "magic" - they are bound to the state's context like class instance methods but you can if you prefer use `,e.jsx("i",{children:"external functions"})," instead of actions and just pass state as an argument and modify the state from the outside."]})}),e.jsx(p,{size:"md",children:"Can actions be async?"}),e.jsx(w,{spacing:2,align:"stretch",children:e.jsxs(d,{layerStyle:"card",children:["Yes - even external ones can be async. However a few considerations:",e.jsxs("ul",{children:[e.jsxs("li",{children:["Transactions cannot contain async actions. Its just not tenable to implement rollback and async behavior in the same system. however you can call (sync) transactions from ",e.jsx("i",{children:"inside"})," an async function."]}),e.jsx("li",{children:"You may find it slightly more work to test external functions."}),e.jsx("li",{children:'You can use external "helper functions" like lodash utilities, inside an action provided they can handle immutable inputs'})]})]})}),e.jsx(p,{size:"md",children:"What is an action?"}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{layerStyle:"card",children:[e.jsx(l,{fontWeight:"semibold",mb:2,children:"Actions Have Two Purposes"}),e.jsxs("ul",{children:[e.jsxs(l,{fontSize:"sm",as:"li",children:[e.jsx("strong",{children:"State Mutation:"})," Update the store's value using mutate, set, or next"]}),e.jsxs(l,{fontSize:"sm",as:"li",children:[e.jsx("strong",{children:"Selectors/Computed Values:"})," you can express summary or portions of state out of actions and return it to the calling context."]})]})]}),e.jsxs(d,{layerStyle:"card",bg:"gray.50",children:[e.jsx(l,{fontWeight:"semibold",mb:2,children:"Actions are bound to the Store"}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("code",{children:"this"})," in actions refers to the store itself. You can use"," ",e.jsx("code",{children:"this.$"}),",",e.jsx("code",{children:"this.set"}),", ",e.jsx("code",{children:"this.next"}),","," ",e.jsx("code",{children:"this.value"}),", etc."]})]})]}),e.jsx(p,{size:"md",children:"The Value parameter"}),e.jsx(w,{spacing:2,align:"stretch",children:e.jsx(d,{layerStyle:"card",children:e.jsxs(l,{fontSize:"sm",children:["The first parameter ",e.jsx("code",{children:"value"})," is the state's value property,"," ",e.jsx("i",{children:"when the action started"})," . If your action changes state and you want to get the most current version of state, examine ",e.jsx("code",{children:"this.value"})," or"," ",e.jsx("code",{children:"this.get('path')"})," to get the latest state value.",e.jsx("br",{}),e.jsx("br",{}),"You ",e.jsx("i",{children:"must"})," add it as the first parameter in your action, but when you"," ",e.jsx("i",{children:"call"})," your action, you don't have to add it in - Forestry will automatically prepend it to any input arguments internally.",e.jsx(Y,{snippetName:"counter-example",folder:"actions-state",language:"typescript",ts:!0})]})})}),e.jsx(p,{size:"md",children:"How to update state"}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(le,{status:"info",children:[e.jsx(de,{}),e.jsxs(l,{fontSize:"sm",children:["Unlike Redux, ",e.jsx("strong",{children:"the return value of actions does NOT update state"}),". Updating state is done imperatively by calling state methods."]})]}),e.jsx(V,{title:"set(path: string | string[], value: any): void",titleAsCode:!0,snippetName:"set-examples",snippetFolder:"actions-state",language:"typescript",ts:!0,children:"Sets a property in the state structure with a new value. Path can be a string or dot-separated deep path."}),e.jsx(V,{title:"mutate(updater: (draft: T) => void | T): void",titleAsCode:!0,snippetName:"mutate-examples",snippetFolder:"actions-state",language:"typescript",ts:!0,children:"Allows you to edit the state as a normal mutable JavaScript object using Immer's produce function."}),e.jsx(V,{title:"next(value: T): void",titleAsCode:!0,snippetName:"next-examples",snippetFolder:"actions-state",language:"typescript",ts:!0,children:"Replaces the entire state with a new value. Generally the least useful method - prefer set() or mutate() for most cases."})]})]}),e.jsxs(W,{title:"Action Patterns in Practice",children:[e.jsx(d,{layerStyle:"card",children:e.jsx(l,{children:"Practical examples showing the recommended patterns for different types of state updates."})}),e.jsxs(pe,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,children:"Actions can call othe ractions"}),e.jsx(l,{color:"gray.600",mb:4,children:"High-level actions that orchestrate multiple tactical operations."}),e.jsx(Y,{snippetName:"strategicActions",folder:"ActionsState"})]}),e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,children:"Tactical Actions"}),e.jsx(l,{color:"gray.600",mb:4,children:"Low-level, reusable utilities that handle specific mutations."}),e.jsx(Y,{snippetName:"tacticalActions",folder:"ActionsState"})]})]})]}),e.jsxs(W,{title:"Interactive Actions Demo",children:[e.jsx(l,{color:"gray.600",children:"Try different action patterns and see how they update the state:"}),e.jsx(Ya,{})]}),e.jsxs(W,{title:"Complete Source Code",children:[e.jsx(l,{color:"gray.600",children:"Here's the complete implementation of the actions demo above:"}),e.jsx(ke,{tabs:[{label:"Store Definition",language:"typescript",snippet:"storeDefinition",folder:"ActionsState"},{label:"React Integration",language:"tsx",snippet:"reactIntegrationDemo",folder:"ActionsState"},{label:"Action Patterns",language:"typescript",snippet:"actionPatterns",folder:"ActionsState"}]})]}),e.jsx(W,{title:"Action Best Practices",children:e.jsxs(pe,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"green.600",children:"âœ… Best Practices for Actions"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Keep actions focused"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"One action should do one thing well; take advantage of nested actions to break up complex behaviors into several small helpers"})]}),e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Compose with nested actions"}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:[e.jsx("code",{children:"this.$.otherAction()"})," for reusability"]})]}),e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Use actions in place of hooks or wrappers"}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["Because actions are bound to store context you can use them directly to respond to events - you don't have to wrap them in lambdas or ",e.jsx("code",{children:"useCallback"}),". You can write actions to deconstruct events and pass them directly to"," ",e.jsx("code",{children:"onChange(state.$.onFieldChange"}),". You can even attach data-keys to qualify the behavior of the actions to reduce having to write new handlers for each event use case."]})]})]})]}),e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"red.600",children:"âŒ Things that won't work"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(d,{p:3,bg:"red.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"You cannot edit the value parameter"}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["the value parameter ",e.jsx("i",{children:"and"})," ",e.jsx("code",{children:"this.value"})," are both",e.jsx("a",{href:"https://immerjs.github.io/immer/",children:"Immer"})," immutables that"," ",e.jsx("i",{children:"cannot be edited"}),' - this is even "more const than const";',e.jsx("code",{children:"Map.set"})," or ",e.jsx("code",{children:"array.push/pop/etc"})," do not work on values. (this by the way is also true of Redux Toolkit actions).",e.jsx("br",{}),e.jsx("br",{}),"The ",e.jsx("code",{children:".mutate(lambda)"})," method is how you can directly edit state value."]})]}),e.jsxs(d,{p:3,bg:"red.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Actions cannot be arrow functions (lambdas)"}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["you cannot bind or change a lambdas' definiton of this so actions cannot be bound to state from the constructor definitions: eg.,",e.jsx(Y,{snippetName:"arrow-function-antipattern",folder:"actions-state",language:"typescript",ts:!0}),'will not give you the desired result as "this" will not be the store.']})]})]})]})]})})]})}),Qa=()=>e.jsx(W,{children:e.jsxs(w,{layerStyle:"section",children:[e.jsx(p,{size:"lg",children:"Integration Patterns"}),e.jsx(l,{textStyle:"body",children:"Forestry 4 integrates seamlessly with React using standard hooks and patterns."}),e.jsxs(d,{width:"full",children:[e.jsx(p,{size:"md",mb:3,children:"Hook Usage"}),e.jsx(l,{textStyle:"body",children:"Use Forestry hooks to connect stores to React components."}),e.jsx(Y,{snippetName:"forestryHooks",folder:"ReactIntegration"})]})]})}),Ln=()=>"",ec=()=>e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Live Todo App Demo"}),e.jsx(l,{color:"gray.600",children:"A complete todo app showing React + Forestry 4 integration patterns:"}),e.jsx(Ln,{})]})}),tc=()=>e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(W,{title:"React Hook Patterns",children:e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,children:"Forestry Hook Source Code"}),e.jsx(l,{textStyle:"body",children:"Here are the complete implementations of Forestry's React integration hooks:"}),e.jsxs(w,{layerStyle:"section",align:"stretch",width:"full",children:[e.jsxs(d,{children:[e.jsx(l,{fontWeight:"bold",mb:2,children:"useForestryLocal - Local Store Management"}),e.jsx(l,{textStyle:"description",children:"Creates and manages a store instance using useRef pattern, returns [value, store]"}),e.jsx(Y,{snippetName:"useForestryLocalSource",folder:"ReactIntegration"})]}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"bold",mb:2,children:"useObserveForest - External Store Observation"}),e.jsx(l,{textStyle:"description",children:"Observes an existing store/forest instance, returns just the value"}),e.jsx(Y,{snippetName:"useObserveForestSource",folder:"ReactIntegration"})]})]})]})}),e.jsxs(W,{title:"Referential Integrity with Immer",children:[e.jsx(l,{textStyle:"body",children:"Forestry uses Immer internally, which ensures that any changed value is always referentially unique. This means you can trust any component of state to drive useEffect dependencies correctly."}),e.jsx(Y,{snippetName:"referentialIntegrity",folder:"ReactIntegration"}),e.jsxs(le,{status:"info",mt:4,children:[e.jsx(de,{}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"bold",children:"Key Benefit:"}),e.jsx(l,{children:"Unlike manual state management where you might accidentally mutate objects and break React's dependency system, Forestry eliminates this entire class of bugs through Immer's referential integrity."})]})]})]})]}),nc=()=>e.jsx(W,{children:e.jsxs(w,{layerStyle:"section",children:[e.jsx(p,{size:"lg",children:"Complete Source Code"}),e.jsx(l,{textStyle:"body",children:"Here's the complete implementation of the todo app above:"}),e.jsx(ke,{tabs:[{label:"Store Factory",language:"typescript",snippet:"todoStoreFactory",folder:"ReactIntegration"},{label:"React Component",language:"tsx",snippet:"todoAppComponent",folder:"ReactIntegration"}]})]})}),rc=()=>e.jsx(W,{children:e.jsxs(w,{layerStyle:"section",children:[e.jsx(p,{size:"lg",children:"React Integration Best Practices"}),e.jsx(l,{children:'React is "quirky" about some features; the hooks above take care of all these concerns but if you plan to integrate Forestry with your own code or custom hooks follow these guidelines.'}),e.jsxs(pe,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"green.600",children:"âœ… Best Practices"}),e.jsxs(w,{layerStyle:"section",spacing:3,align:"stretch",children:[e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Use Forestry hooks to reduce blend boilerplate"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"You can subscribe in useEffect and store stores in ref -- but the hooks take care of a lot of housekeeping. At this point the hooks are not in the component - you'll have to bring the in, because it frees you to use your current react version (or Preact or whatever)"})]}),e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Trust referential integrity"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"given all parts of a store changes when part of it changes, you can trust any part of the store in dependency arrays to properly trigger useEffect"})]}),e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Diminish Hooks whenever possible"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Using store values or selector actions reduces the number of callbacks or memos you have to put in your component body."})]}),e.jsxs(d,{p:3,bg:"green.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Pass whole stores via context or params"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Rather than deconstructing actions or values down deep paths, pass the whole store and its value down or through context."})]})]})]}),e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"red.600",children:"âŒ Things that will not work well"}),e.jsxs(w,{layerStyle:"section",spacing:3,align:"stretch",children:[e.jsxs(d,{p:3,bg:"red.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Mutate store values directly"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Immer won't let you do that - use mutate or set to alter parts or all of the store value."})]}),e.jsxs(d,{p:3,bg:"red.50",borderRadius:"md",children:[e.jsx(l,{fontWeight:"semibold",children:"Create stores in component function body"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"If you don't use the factory hooks, create stores in memos or via careful use of refs."})]})]})]})]})]})}),sc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{layerStyle:"section",spacing:8,children:[e.jsxs(d,{children:[e.jsx(p,{size:"xl",mb:4,children:"React Integration"}),e.jsx(l,{fontSize:"lg",color:"gray.600",children:"Learn how to integrate Forestry 4 stores with React components and hooks."})]}),e.jsx(Qa,{}),e.jsx(ec,{}),e.jsx(tc,{}),e.jsx(nc,{}),e.jsx(rc,{})]})}),Mn=()=>"",Vn=()=>"",ic=()=>e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Deeper Thoughts - Validation Troubleshooting Guide"}),e.jsx(l,{children:'There are basically two modes of validation - "hard" validation that prevents certain patterns from ever appearing in state and "soft" validation in which errors and gates change based on the validity of certain field(s).'}),e.jsxs(l,{as:"ul",size:"sm",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Hard Validation"})," is managed in three different ways in Forest. Every new value candidate goes through these",e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("code",{children:".pre"}),' - a function that "filters" or fixes bad data; it occurs before tests are ran. It accepts a candidate value and returns a (potentially fixed) value. The purpose of pre is to catch "correctable" errors like data sorting, stringy numbers, or other minor flaws in prospective data. it is not ',e.jsx("i",{children:"technically"}),' a validator but it may prevent "mostly good" changes from being blocked on correctable issues']}),e.jsxs("li",{children:[e.jsx("code",{children:".schema"})," - managed by she schema property in the constructor params, it defines a Zod instance to define a schema that the state must follow; its basically parametric typescript - but unlike TS it is actually an enforced ruleset in React that dynamically blocks bad data from being entered in state."]}),e.jsxs("li",{children:[e.jsx("code",{children:".tests"})," - a function or array of functions that if they return a string or throw, prevent bad data from being saved into state; these test errors will throw to the outer scope; you may want to put catchers around code that might trigger tests. if tests is an array of functions, they are executed in order and any failure blocks subsequent tests from running."]})]})]}),e.jsxs("li",{children:[e.jsx("b",{children:"Soft Validation"}),' is encoded in pre or in actions to assert "annotation" on the state as a whole or specific fields; it is the sort of thing you expect to work with forms where the user is not prevented from entering a bad data, but they are'," ",e.jsx("i",{children:"infrormed"})," about the state of their field or form with error messages. Obviously, for this to work both the bad data and the error message (and potentially an isValid boolean) exist for every field and potentially the form as a whole. there are two ways of doing this - embedding these properties in state or writing actions such as",e.jsxs("code",{children:["isValid(value, fieldName, fieldValue): ","{isValid: boolean, error? string}"," "]}),"or ",e.jsxs("code",{children:["isEmailValid(): ","{isValid: boolean, error? string}"]})]})]}),e.jsxs(d,{layerStyle:"infoBox",bg:"blue.50",children:[e.jsx(p,{size:"sm",children:"ðŸ¤” In short:"}),e.jsxs(w,{spacing:2,align:"start",fontSize:"sm",children:[e.jsxs(l,{children:[e.jsx("strong",{children:'Transient ("soft") UI Feedback/ data correction'})," â†’ Use"," ",e.jsx(O,{children:"prep"}),"functions or feedback actions."]}),e.jsxs(l,{children:[e.jsx("strong",{children:"Type Safety, data prefiltering / sanitation?"})," â†’ Use ",e.jsx(O,{children:"Zod"})," ",'schema validation for "dynamic typescript like" format enforcement']}),e.jsxs(l,{children:[e.jsx("strong",{children:"Complex Business Rules?"})," â†’ Use ",e.jsx(O,{children:"tests"})," function(s)"]})]}),e.jsxs(l,{size:"sm",children:["again - data updating occurs ",e.jsx("b",{children:"in this order"}),"; if it matters, for instance, you can trust that your candidates conform to your schema before executing your tests."]})]}),e.jsxs(d,{layerStyle:"infoBox",bg:"gray.50",children:[e.jsx(p,{size:"sm",children:"ðŸ“š Complete Example - All Three Layers:"}),e.jsx(l,{fontSize:"sm",mb:3,children:"A shopping cart that uses Zod for structure, tests for business rules, and prep for UI state:"}),e.jsx(Y,{snippetName:"shoppingCartValidation",folder:"ValidationSystem"})]}),e.jsxs(d,{layerStyle:"infoBox",bg:"gray.50",children:[e.jsx(p,{size:"sm",children:"Do I have to use Zod?"}),e.jsx(l,{children:"Technically the schema parameter expects an object with a parse(value) method that throws on bad code. If you don't want to pull in Zod you can put any other / a custom parser in to schema as long as it exposes a parse method; if it doesn't create an object and a parse method and enclose your validator inside of it. (FWIW Zod is not bundled with Forestry so this option may appeal if you are fanatic about bundle size reduction.)"})]})]})}),oc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"xl",mb:4,children:"Validation System"}),e.jsx(l,{fontSize:"lg",color:"gray.600",children:"Learn about Forestry 4's comprehensive validation system with practical examples of schema validation, business logic tests, and UI state management."})]}),e.jsxs(le,{status:"info",children:[e.jsx(de,{}),e.jsxs(l,{fontSize:"sm",children:[e.jsx("strong",{children:"Three-Layer Validation:"})," Use Zod for type safety, test functions for critical business rules, and prep functions for UI state. Each component below demonstrates these patterns in action."]})]}),e.jsx(Mn,{}),e.jsx(Vn,{}),e.jsx(ic,{})]})}),ac=()=>e.jsx(d,{maxW:"6xl",mx:"auto",p:6,children:e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{textAlign:"center",children:[e.jsx(p,{size:"2xl",mb:4,children:"Schema Validation with Zod"}),e.jsx(l,{fontSize:"xl",color:"gray.600",maxW:"3xl",mx:"auto",children:"Use Zod schemas for runtime type validation and enhanced type safety in Forestry stores. Schemas provide structural validation, constraint enforcement, and clear error messages."})]}),e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Why Use Zod Schemas?"}),e.jsxs(pe,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(d,{layerStyle:"card",bg:"green.50",children:[e.jsx(p,{size:"md",mb:2,color:"green.700",children:"Runtime Validation"}),e.jsx(l,{fontSize:"sm",children:"Catch invalid state structures at runtime, preventing bugs from malformed data that TypeScript alone cannot detect."})]}),e.jsxs(d,{layerStyle:"card",bg:"blue.50",children:[e.jsx(p,{size:"md",mb:2,color:"blue.700",children:"Type Safety"}),e.jsxs(l,{fontSize:"sm",children:["Generate TypeScript types directly from schemas using ",e.jsx(O,{children:"z.infer"}),", ensuring perfect alignment between runtime and compile-time validation."]})]}),e.jsxs(d,{layerStyle:"card",bg:"purple.50",children:[e.jsx(p,{size:"md",mb:2,color:"purple.700",children:"Constraint Enforcement"}),e.jsx(l,{fontSize:"sm",children:"Define business rules like min/max values, string patterns, and array lengths directly in the schema for automatic validation."})]}),e.jsxs(d,{layerStyle:"card",bg:"orange.50",children:[e.jsx(p,{size:"md",mb:2,color:"orange.700",children:"Clear Error Messages"}),e.jsx(l,{fontSize:"sm",children:"Zod provides detailed, human-readable error messages that help developers quickly identify and fix validation issues."})]})]})]})}),e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Basic Schema Setup"}),e.jsxs(l,{color:"gray.600",children:["Define your state schema and use it as the ",e.jsx(O,{children:"schema"})," property in Store constructor. Forestry will automatically validate state changes against this schema."]}),e.jsx(Y,{snippetName:"zodSchemaValidation",folder:"ActionsState"})]})}),e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Common Schema Patterns"}),e.jsx(ke,{tabs:[{label:"Basic Types",language:"typescript",snippet:"basicTypes",folder:"SchemaValidation"},{label:"Complex Objects",language:"typescript",snippet:"complexObjects",folder:"SchemaValidation"},{label:"Arrays & Validation",language:"typescript",snippet:"arraysValidation",folder:"SchemaValidation"},{label:"Conditional Logic",language:"typescript",snippet:"conditionalLogic",folder:"SchemaValidation"}]})]})}),e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Integration with Prep Functions"}),e.jsx(l,{color:"gray.600",children:"While schemas handle structural validation, prep functions handle business logic and user input validation. They work together for comprehensive validation."}),e.jsxs(le,{status:"info",children:[e.jsx(de,{}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",children:"Schema vs Prep Validation"}),e.jsxs(nr,{mt:2,spacing:1,children:[e.jsxs(x,{children:[e.jsx("strong",{children:"Schema:"})," Structure, types, constraints (throws errors)"]}),e.jsxs(x,{children:[e.jsx("strong",{children:"Prep:"})," Business rules, user input (sets quality feedback)"]})]})]})]}),e.jsx(Y,{snippetName:"schemaPrepIntegration",folder:"SchemaValidation"})]})}),e.jsx(W,{children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(p,{size:"lg",children:"Schema Best Practices"}),e.jsxs(pe,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"green.600",children:"âœ… Do"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(d,{layerStyle:"highlight",bg:"green.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Define schemas at factory level"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Create schemas alongside your factory functions for reusability"})]}),e.jsxs(d,{layerStyle:"highlight",bg:"green.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Use meaningful constraints"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Add min/max, patterns, and business-relevant validation rules"})]}),e.jsxs(d,{layerStyle:"highlight",bg:"green.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Infer TypeScript types"}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["Use ",e.jsx(O,{children:"z.infer<typeof Schema>"})," for type safety"]})]})]})]}),e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:3,color:"red.600",children:"âŒ Don't"}),e.jsxs(w,{spacing:3,align:"stretch",children:[e.jsxs(d,{layerStyle:"highlight",bg:"red.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Duplicate validation logic"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Don't repeat schema constraints in prep functions"})]}),e.jsxs(d,{layerStyle:"highlight",bg:"red.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Over-constrain schemas"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Keep schemas focused on structure, not business rules"})]}),e.jsxs(d,{layerStyle:"highlight",bg:"red.50",children:[e.jsx(l,{fontWeight:"semibold",children:"Ignore schema errors"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Schema validation errors indicate serious structural issues"})]})]})]})]})]})})]})}),cc=()=>"",lc=()=>e.jsxs(te,{maxW:"container.xl",py:8,children:[e.jsxs(p,{size:"xl",mb:4,children:["RxJS Integration",e.jsx(S,{ml:3,colorScheme:"purple",children:"Power Tool"})]}),e.jsx(W,{title:"Leverage RxJS operators and reactive programming patterns with Forestry 4",children:e.jsxs(d,{children:[e.jsxs(l,{mt:4,children:["Every store exposes an rxjs subject. you can observe or ",e.jsx("code",{children:".pipe(...)"}),"a stores' output to throttle it, or conbine or modify store stream(s)."]}),e.jsxs(l,{children:["Stores follow the observable pattern closely; they don't immediately derive from BehaviorSubjects but they do follow the pattern - methods like"," ",e.jsx("code",{children:"next(candidate), complete, subscribe"}),"behave as you would expect for an RxJS Observable."]})]})}),e.jsx(W,{title:"Immer values for consisntly unique values",children:e.jsxs(d,{children:[e.jsxs(l,{fontSize:"lg",children:[e.jsx("a",{href:"https://immerjs.github.io/immer/",children:"Immer"})," enforces immutability and as a side effect unique references in store values"]}),e.jsx(l,{mt:4,children:"Like ReactToolkit, values in states are immutable; this has strong benefits in react ensuring that for instance, every time you add an element to an array or map, its returned as a new array or map every time, triggering updates to dependency lists or components."}),e.jsxs(l,{children:["the ",e.jsx("code",{children:".mutate()"})," method in stores are in fact wrappers for immer providers."]})]})})]}),dc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(d,{children:[e.jsxs(p,{size:"xl",mb:4,children:["Advanced Patterns",e.jsx(S,{ml:3,colorScheme:"purple",children:"Power Tool"})]}),e.jsx(l,{fontSize:"lg",color:"gray.600",children:"Advanced patterns, debugging techniques, and performance optimization."}),e.jsx(l,{mt:4,color:"gray.500",children:"This page is under construction. Coming soon!"})]})}),uc=()=>e.jsx(d,{children:e.jsxs(mt,{children:[e.jsx(d,{layerStyle:"sidebar",children:e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"md",mb:4,children:"API Reference"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Navigate to any section"})]}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",color:"blue.600",mb:2,children:"Core Classes"}),e.jsxs(w,{spacing:1,align:"stretch",pl:2,children:[e.jsx(re,{href:"#forest",layerStyle:"navLink",children:"Forest"}),e.jsx(re,{href:"#forestbranch",layerStyle:"navLink",children:"ForestBranch"})]})]}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",color:"green.600",mb:2,children:"Forest Methods"}),e.jsxs(w,{spacing:1,align:"stretch",pl:2,children:[e.jsx(re,{href:"#forest-constructor",layerStyle:"navLink",children:"Constructor & Properties"}),e.jsx(re,{href:"#forest-core",layerStyle:"navLink",children:"Core"}),e.jsx(re,{href:"#forest-branching",layerStyle:"navLink",children:"Branching"}),e.jsx(re,{href:"#forest-transactions",layerStyle:"navLink",children:"Transaction"}),e.jsx(re,{href:"#forest-validation",layerStyle:"navLink",children:"Validation"})]})]}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",color:"purple.600",mb:2,children:"ForestBranch Methods"}),e.jsxs(w,{spacing:1,align:"stretch",pl:2,children:[e.jsx(re,{href:"#branch-properties",layerStyle:"navLink",children:"Branch Properties"}),e.jsx(re,{href:"#branch-methods",layerStyle:"navLink",children:"Overridden Methods"})]})]}),e.jsxs(d,{children:[e.jsx(l,{fontWeight:"semibold",color:"orange.600",mb:2,children:"Types"}),e.jsxs(w,{spacing:1,align:"stretch",pl:2,children:[e.jsx(R,{href:"#types-config",layerStyle:"navLink",children:"Configuration Types"}),e.jsx(R,{href:"#types-actions",layerStyle:"navLink",children:"Action Types"}),e.jsx(R,{href:"#types-validation",layerStyle:"navLink",children:"Validation Types"}),e.jsx(R,{href:"#types-utility",layerStyle:"navLink",children:"Utility Types"})]})]})]})]})}),e.jsx(d,{layerStyle:"mainContent",children:e.jsx(te,{maxW:"container.lg",children:e.jsxs(w,{spacing:12,align:"stretch",children:[e.jsxs(d,{children:[e.jsxs(p,{size:"xl",mb:4,children:["API Reference",e.jsx(S,{ml:3,colorScheme:"blue",children:"Reference"})]}),e.jsx(l,{textStyle:"hero",children:"Complete API documentation for Forest and ForestBranch classes."})]}),e.jsxs(d,{id:"forest",children:[e.jsxs(q,{mb:4,children:[e.jsx(p,{size:"lg",children:"Forest"}),e.jsx(S,{colorScheme:"green",children:"Class"}),e.jsx(R,{to:"/store",style:{marginLeft:"12px"},children:e.jsx(S,{colorScheme:"teal",fontSize:"xs",children:"See Store Basics â†’"})})]}),e.jsx(l,{textStyle:"body",children:"The primary reactive state management class that supports branching and hierarchical state management. Forest includes all core store functionality plus advanced features for managing complex nested data structures."})]}),e.jsxs(d,{id:"forest-constructor",layerStyle:"methodCard",children:[e.jsx(p,{size:"md",mb:4,children:"Constructor & Properties"}),e.jsx(d,{mb:6,children:e.jsx(V,{title:"new Forest<DataType, Actions>(params: StoreParams)",children:"Creates a new Forest instance with the specified data type and actions. Forest is the root store that can create branches."})}),e.jsx(p,{size:"sm",mb:3,children:"Properties"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(O,{children:"value: DataType"})," - Current forest value (readonly)"]}),e.jsxs(x,{children:[e.jsx(O,{children:"name: string"})," - Forest identifier"]}),e.jsxs(x,{children:[e.jsx(O,{children:"$: Actions"})," - Exposed ",e.jsx(R,{to:"/actions'",children:"action"})," methods."]}),e.jsxs(x,{children:[e.jsx(O,{children:"acts: Actions"})," - Alias for $ property"]}),e.jsxs(x,{children:[e.jsx(O,{children:"res: Map<string, any>"})," - container for external resources such as database connectors, DOM references. Changing res entries does not trigger any subscriber updates."]}),e.jsxs(x,{children:[e.jsx(O,{children:"isActive: boolean"})," - Whether forest accepts updates; set to false when ",e.jsx("code",{children:"complete()"})," is called"]}),e.jsxs(x,{children:[e.jsx(O,{children:"path: Path"})," - the path between this store and its parent; is empty array [] for root Forest"]}),e.jsxs(x,{children:[e.jsx(O,{children:"parent?: StoreBranch"})," - null for root Forest"]}),e.jsxs(x,{children:[e.jsx(O,{children:"isRoot: boolean"})," - Always true for Forest"]}),e.jsxs(x,{children:[e.jsx(O,{children:"root: Forest"})," - Returns self (this)"]})]})]}),e.jsxs(d,{id:"forest-core",layerStyle:"methodCard",children:[e.jsx(p,{size:"md",mb:4,children:"Core Methods"}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(V,{title:"next(value: Partial<DataType>): void",snippetName:"nextExample",snippetFolder:"APIReference",codeTitle:"Updating Forest Values",children:"Updates the forest with a new value."}),e.jsx(V,{title:"subscribe(listener: Listener<DataType>): Subscription",snippetName:"subscribeExample",snippetFolder:"APIReference",codeTitle:"Subscribing to Changes",children:"Subscribes to forest changes. Returns RxJS Subscription for cleanup."}),e.jsx(V,{title:"get(path?: Path): any",snippetName:"getPathExample",snippetFolder:"APIReference",codeTitle:"Getting Values by Path",children:"Gets value at specified path. Returns entire value if no path provided."}),e.jsx(V,{title:"set(path: Path, value: unknown): boolean",snippetName:"setValueExample",snippetFolder:"APIReference",codeTitle:"Setting Values Example",children:"Sets value at specified path using Immer for immutable updates. Returns true if successful."}),e.jsx(V,{title:"complete(): DataType",children:"Completes the forest and all branches, preventing further updates. Returns final value. note - branch completions effect only that branch and any sub-branches it spawned; completing the root Forest will terminate the entire forest and all its branches and sub-branches."})]})]}),e.jsxs(d,{id:"forest-branching",layerStyle:"methodCard",children:[e.jsx(p,{size:"md",mb:4,children:"Branching Methods"}),e.jsx(w,{spacing:6,align:"stretch",children:e.jsx(V,{title:"branch<Type, Actions>(path: Path, params: BranchParams): ForestBranch",snippetName:"branchCreationExample",snippetFolder:"APIReference",codeTitle:"Branch Creation Example",children:"Creates a new branch at the specified path with its own actions and validation. This is the key feature that makes Forest powerful for managing nested state."})})]}),e.jsxs(d,{id:"forest-transactions",layerStyle:"methodCard",children:[e.jsxs(p,{size:"md",mb:4,children:["Transaction Methods",e.jsx(R,{to:"/transactions",style:{marginLeft:"12px"},children:e.jsx(S,{colorScheme:"blue",fontSize:"xs",children:"See detailed guide â†’"})})]}),e.jsx(w,{spacing:6,align:"stretch",children:e.jsxs(V,{title:"transact(params: TransParams | TransFn, suspendValidation?: boolean): void",snippetName:"transactMethodExamples",snippetFolder:"Transactions",codeTitle:"Transaction Examples",children:["Executes multiple operations as a single atomic transaction across the forest and all branches. All changes within the transaction are applied atomically. It is possible to nest transactions - in which case all subscriptions are suspended until the outermost transactions complete. Any thrown (uncaught) error suspends a transaction and reverts ",e.jsx("i",{children:"all"})," updates made since the beginning of that transaction; in the case of nested transaction, its possible to catch the inner transactions' error in which case the state will be the same as it was before the inner transaction started. ",e.jsx("b",{children:"action must NOT be a lambda/arrow function"}),"."]})})]}),e.jsxs(d,{id:"forest-validation",layerStyle:"methodCard",children:[e.jsxs(p,{size:"md",mb:4,children:["Validation Methods",e.jsx(R,{to:"/validation",style:{marginLeft:"12px"},children:e.jsx(S,{colorScheme:"green",fontSize:"xs",children:"See detailed guide â†’"})})]}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(V,{title:"validate(value: unknown): Validity",snippetName:"validateMethod",snippetFolder:"APIReference",codeTitle:"Validation Examples",children:"Validates a value against schema and tests. Returns validity object with detailed error information. If the current state of the store is under a transaction with suspendValidation, it will always return isValid: true. validate captures any thrown errors from validation functions into the feedback."}),e.jsx(V,{title:"test(value: unknown): Validity",snippetName:"testMethod",snippetFolder:"APIReference",codeTitle:"Test Function Examples",children:"Identical to validate -- however it ignores any transactional / suspendValidation conditions"})]})]}),e.jsxs(d,{id:"forestbranch",layerStyle:"methodCard",children:[e.jsxs(q,{mb:4,children:[e.jsx(p,{size:"lg",children:"ForestBranch"}),e.jsx(S,{colorScheme:"purple",children:"Class"})]}),e.jsxs(l,{textStyle:"body",mb:6,children:["ForestBranch provides a focused interface for managing a specific part of a Forest's data. It inherits all Forest methods but operates on a specific path within the parent Forest, automatically synchronizing changes bidirectionally. You can create a transient branch to do a focused operation on a subset of the store or to observe specific subsets of the store hierarchy. It is the output of the",e.jsx("code",{children:"branch(path)"})," method of Forest or ForestBranch."]}),e.jsx(p,{size:"md",mb:4,children:"Key Properties"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(O,{children:"path: Path"})," - Path from parent to this branch."]}),e.jsxs(x,{children:[e.jsx(O,{children:"parent: Forest | ForestBranch"})," - Parent forest or branch that created this branch"]}),e.jsxs(x,{children:[e.jsx(O,{children:"root: Forest"})," - Reference to the root Forest instance"]}),e.jsxs(x,{children:[e.jsx(O,{children:"isRoot: boolean"})," - Always false for branches"]}),e.jsxs(x,{children:[e.jsx(O,{children:"value: DataType"})," - Current value at this branch's path (computed from parent)"]}),e.jsxs(x,{children:[e.jsx(O,{children:"$: Actions"})," - Branch-specific action methods that operate on this path"]})]}),e.jsx(l,{textStyle:"body",mt:4,children:"ForestBranch inherits all Forest methods (next, get, set, mutate, subscribe, etc.) but they operate on the branch's specific path within the parent Forest, not on independent state. also completing a branch completes it and its sub-items but not the parent / or upwwards stores, including the root."})]}),e.jsxs(d,{children:[e.jsxs(q,{mb:4,children:[e.jsx(p,{size:"lg",children:"Type Definitions"}),e.jsx(S,{colorScheme:"orange",children:"Types"})]}),e.jsx(l,{textStyle:"body",children:"Key TypeScript interfaces and types used throughout Forestry 4."})]}),e.jsxs(d,{id:"types-config",layerStyle:"methodCard",children:[e.jsx(p,{size:"md",mb:4,children:"Constructor parameter structure"}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsxs(V,{title:"StoreParams<DataType, Actions>",children:["Configuration object for creating Forest instances. Contains:",e.jsxs("ul",{children:[e.jsxs("li",{children:["value ",e.jsx(S,{colorScheme:"red",children:"Required"})," "]}),e.jsx("li",{children:"actions"}),e.jsx("li",{children:"schema"}),e.jsx("li",{children:"tests"}),e.jsx("li",{children:"prep"}),e.jsx("li",{children:"name"})]})]}),e.jsxs(V,{title:"BranchParams<DataType, Actions>",children:["Identical to StoreParams except it has no value, and has a ",e.jsx("code",{children:"path"}),"parameter; branches' parameter is read from the root Forest instance via chained path between the branch and the root Forestry"]})]})]}),e.jsxs(d,{id:"types-actions",layerStyle:"methodCard",children:[e.jsxs(p,{size:"md",mb:4,children:["Action Types",e.jsx(R,{to:"/actions",style:{marginLeft:"12px"},children:e.jsx(S,{colorScheme:"orange",fontSize:"xs",children:"See Actions guide â†’"})})]}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(V,{title:"ActionParamsFn<DataType, Args, Returned>",children:"Function signature for action definitions (with value parameter)."}),e.jsx(V,{title:"ActionExposedFn<Args, Returned>",children:"Function signature for exposed actions (without value parameter)."})]})]}),e.jsxs(d,{id:"types-validation",layerStyle:"methodCard",children:[e.jsxs(p,{size:"md",mb:4,children:["Validation Types",e.jsx(R,{to:"/schemas",style:{marginLeft:"12px"},children:e.jsx(S,{colorScheme:"purple",fontSize:"xs",children:"See Schema guide â†’"})})]}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsx(V,{title:"ValueTestFn<DataType>",children:"Function that tests a value and returns error message or null -- or throws."}),e.jsxs(V,{title:"Validity",children:["Object returned by test and isValid",e.jsxs("ul",{children:[e.jsx("li",{children:"isValid: boolean"}),e.jsx("li",{children:"error?: Error"})]})]}),e.jsx(V,{title:"ValidationResult",children:"String error message or null for valid values."})]})]}),e.jsxs(d,{id:"types-utility",layerStyle:"methodCard",children:[e.jsx(p,{size:"md",mb:4,children:"Utility Types"}),e.jsxs(w,{spacing:6,align:"stretch",children:[e.jsxs(V,{title:"Path",children:["String (",e.jsx("code",{children:"user.id"}),") array (",e.jsx("code",{children:"['user', 'id']"}),") of strings representing object path."]}),e.jsxs(V,{title:"Listener<DataType>",children:["Function that receives store value changes. it can be either a simple one-property function or a structured"," ",e.jsx("a",{href:"https://rxjs.dev/api/index/interface/Observer",children:"Observer"}),"."]}),e.jsx(V,{title:"ResourceMap",children:"Map for storing external resources (DOM, WebGL, etc.)."})]})]}),e.jsxs(d,{children:[e.jsxs(q,{mb:4,children:[e.jsx(p,{size:"lg",children:"Examples"}),e.jsx(S,{colorScheme:"teal",children:"Examples"})]}),e.jsx(l,{textStyle:"body",children:"Common usage patterns and examples for each API."}),e.jsxs(q,{spacing:4,wrap:"wrap",mt:4,children:[e.jsx(R,{to:"/basic",children:e.jsxs(S,{colorScheme:"blue",p:2,children:[e.jsx(it,{mr:2}),"Store Basics"]})}),e.jsx(R,{to:"/react",children:e.jsxs(S,{colorScheme:"green",p:2,children:[e.jsx(it,{mr:2}),"React Integration"]})}),e.jsx(R,{to:"integration",children:e.jsxs(S,{colorScheme:"purple",p:2,children:[e.jsx(it,{mr:2}),"Validation System"]})})]})]})]})})})]})}),hc=()=>{const t=[{title:"Todo App",path:"/examples/todo-app",badge:"Complete Example",badgeColor:"green",icon:T,description:"A fully-featured todo application demonstrating action-based architecture, form handling, and React integration patterns.",features:["Action-Based Architecture","Computed Values as Actions","Tactical Form Handling","useForestryLocal Integration"]},{title:"Shopping Cart",path:"/examples/shopping-cart",badge:"Validation Focus",badgeColor:"purple",icon:be,description:"A shopping cart application showcasing Forestry 4's validation system, schema integration, and complex business logic.",features:["Zod Schema Validation","Custom Test Functions","Real-time Validation","Complex State Management"]},{title:"Form Validation",path:"/examples/form-validation",badge:"Form Patterns",badgeColor:"blue",icon:gr,description:"Advanced form validation with field-level validation, cross-field dependencies, and async validation patterns.",features:["Field-Level Validation","Cross-Field Dependencies","Async Validation","Error State Management"]},{title:"Transaction Demo",path:"/examples/transaction-demo",badge:"Advanced Pattern",badgeColor:"orange",icon:fr,description:"Comprehensive transaction system example demonstrating atomic operations, rollback capabilities, and complex state management.",features:["Atomic Operations","Automatic Rollback","Nested Transactions","Performance Optimization"]}];return e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{spacing:8,align:"stretch",children:[e.jsxs(d,{textAlign:"center",children:[e.jsx(p,{size:"xl",mb:4,children:"Practical Examples"}),e.jsx(l,{fontSize:"lg",color:"gray.600",maxW:"2xl",mx:"auto",children:"Real-world examples demonstrating Forestry 4's capabilities in various scenarios. Each example showcases different aspects of the library with complete, working code."})]}),e.jsx(pe,{columns:{base:1,md:2},spacing:6,children:t.map(n=>e.jsx(sn,{as:R,to:n.path,_hover:{transform:"translateY(-2px)",shadow:"lg",textDecoration:"none"},transition:"all 0.2s",cursor:"pointer",children:e.jsx(on,{children:e.jsxs(w,{align:"stretch",spacing:4,children:[e.jsxs(q,{justify:"space-between",align:"start",children:[e.jsxs(q,{children:[e.jsx(ye,{as:n.icon,color:"forest.500",boxSize:5}),e.jsx(p,{size:"md",children:n.title})]}),e.jsx(S,{colorScheme:n.badgeColor,variant:"subtle",children:n.badge})]}),e.jsx(l,{color:"gray.600",fontSize:"sm",children:n.description}),e.jsxs(d,{children:[e.jsx(l,{fontSize:"sm",fontWeight:"semibold",mb:2,color:"gray.700",children:"Key Features:"}),e.jsx(w,{align:"stretch",spacing:1,children:n.features.map(r=>e.jsxs(q,{spacing:2,children:[e.jsx(T,{color:"green.500",boxSize:3}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:r})]},r))})]}),e.jsx(re,{as:"span",color:"forest.600",fontWeight:"semibold",fontSize:"sm",_hover:{color:"forest.700"},children:"View Example â†’"})]})})},n.path))}),e.jsx(d,{textAlign:"center",mt:8,children:e.jsx(l,{color:"gray.500",fontSize:"sm",children:"More examples coming soon! Each example includes live demos, complete source code, and detailed explanations of the patterns used."})})]})})},pc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{layerStyle:"section",spacing:8,children:[e.jsxs(d,{textAlign:"center",children:[e.jsxs(Heading,{size:"xl",mb:4,children:["Todo App Example",e.jsx(Badge,{ml:3,colorScheme:"green",children:"Complete Example"})]}),e.jsx(Text,{fontSize:"lg",color:"gray.600",maxW:"2xl",children:"A fully-featured todo application demonstrating Forestry 4's action-based architecture, form handling, filtering, and React integration patterns."})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Key Features Demonstrated"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Action-Based Architecture:"})," All logic encapsulated in store actions"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Computed Values as Actions:"})," filteredTodos(), completedCount(), activeCount()"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Tactical Form Handling:"})," onChange action using event.target.name"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Event Handler Actions:"})," All onClick/onChange handlers are store methods"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"useForestryLocal Integration:"})," Clean hook-based state management"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Validation:"})," Built-in tests for input validation"]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Live Demo"}),e.jsx(Text,{mb:4,color:"gray.600",children:"Try the todo app below. Notice how all interactions are handled through store actions, and the component is purely presentational."}),e.jsx(Ln,{})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Architecture Highlights"}),e.jsxs(le,{status:"info",mb:4,children:[e.jsx(de,{}),"This example demonstrates the ultimate Forestry pattern where the React component is purely declarative JSX with zero business logic."]}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(Heading,{size:"sm",mb:2,children:"Pure Component Pattern"}),e.jsx(Text,{fontSize:"sm",color:"gray.600",children:"The React component contains no business logic, state management, or event handling code. Everything is delegated to store actions."})]}),e.jsxs(d,{children:[e.jsx(Heading,{size:"sm",mb:2,children:"Action Categories"}),e.jsxs(K,{spacing:1,fontSize:"sm",children:[e.jsxs(x,{children:[e.jsx("strong",{children:"Data Actions:"})," addTodo, toggleTodo, removeTodo, setFilter, clearCompleted"]}),e.jsxs(x,{children:[e.jsx("strong",{children:"UI Actions:"})," setFilterAll, setFilterActive, setFilterCompleted, handleKeyPress"]}),e.jsxs(x,{children:[e.jsx("strong",{children:"Selector Actions:"})," filteredTodos, completedCount, activeCount, isAddDisabled"]}),e.jsxs(x,{children:[e.jsx("strong",{children:"Factory Actions:"})," createToggleTodo, createRemoveTodo (for parameterized handlers)"]})]})]}),e.jsxs(d,{children:[e.jsx(Heading,{size:"sm",mb:2,children:"Inline Function Calls"}),e.jsx(Text,{fontSize:"sm",color:"gray.600",children:"All computed values and event handlers use direct action references without arrow functions, resulting in cleaner JSX and better performance."})]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Store Structure"}),e.jsx(se,{language:"typescript",title:"Store Factory Pattern",children:`const createTodoStore = () => {
  return new Forest<TodoState>({
    name: 'todo-app',
    value: {
      todos: initialTodos,
      filter: 'all',
      newTodoText: '',
    },
    actions: {
      // Selector actions (computed values)
      filteredTodos: function (value: TodoState): TodoItem[] {
        switch (value.filter) {
          case 'active': return value.todos.filter(todo => !todo.completed);
          case 'completed': return value.todos.filter(todo => todo.completed);
          default: return value.todos;
        }
      },
      
      completedCount: function (value: TodoState): number {
        return value.todos.filter(todo => todo.completed).length;
      },
      
      // UI event actions
      setFilterAll: function (value: TodoState) {
        this.$.setFilter('all');
      },
      
      // Data manipulation actions
      addTodo: function (value: TodoState) {
        if (!value.newTodoText.trim()) return;
        const newTodo = {
          id: Date.now(),
          text: value.newTodoText.trim(),
          completed: false,
        };
        this.mutate((draft) => {
          draft.todos.push(newTodo);
          draft.newTodoText = '';
        });
      },
      
      // ... more actions
    },
    tests: [
      (value: TodoState) => value.newTodoText.length > 100 ? 'Todo text too long' : null,
    ]
  });
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Component Usage"}),e.jsx(se,{language:"typescript",title:"Pure React Component",children:`const TodoAppDemo: React.FC = () => {
  const [todoValue, todoStore] = useForestryLocal<TodoState>(createTodoStore);

  if (!todoValue) {
    return <Text>Loading...</Text>;
  }

  return (
    <SimpleGrid columns={{ base: 1, lg: 2 }} spacing={6}>
      <VStack spacing={4} align="stretch">
        <Input
          name="newTodoText"
          value={todoValue.newTodoText}
          onChange={todoStore.$.onChange}
          onKeyPress={todoStore.$.handleKeyPress}
        />
        <Button
          onClick={todoStore.$.addTodo}
          isDisabled={todoStore.$.isAddDisabled()}
        >
          Add
        </Button>
        
        <Button onClick={todoStore.$.setFilterAll}>
          All ({todoValue.todos.length})
        </Button>
        <Button onClick={todoStore.$.setFilterActive}>
          Active ({todoStore.$.activeCount()})
        </Button>
        
        {todoStore.$.filteredTodos().map((todo) => (
          <HStack key={todo.id}>
            <Checkbox
              isChecked={todo.completed}
              onChange={todoStore.$.createToggleTodo(todo.id)}
            />
            <Text>{todo.text}</Text>
            <Button onClick={todoStore.$.createRemoveTodo(todo.id)}>
              Ã—
            </Button>
          </HStack>
        ))}
      </VStack>
    </SimpleGrid>
  );
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(Heading,{size:"md",mb:4,children:"Best Practices Demonstrated"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Store Factory Pattern:"})," Use factory functions with useForestryLocal for clean component integration"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Action-Based Selectors:"})," Computed values as actions rather than React useMemo"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Tactical Form Handling:"})," Single onChange action using event.target.name pattern"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Direct Action References:"})," Avoid arrow functions in JSX for better performance"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Minimal State:"})," Store only essential data, compute derived values on-demand"]})]})]})]})}),mc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{layerStyle:"section",spacing:8,children:[e.jsxs(d,{textAlign:"center",children:[e.jsxs(p,{size:"xl",mb:4,children:["Shopping Cart Example",e.jsx(S,{ml:3,colorScheme:"purple",children:"Validation Focus"})]}),e.jsx(l,{fontSize:"lg",color:"gray.600",maxW:"2xl",children:"A shopping cart application demonstrating Forestry 4's validation system, schema integration, and complex business logic handling."})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Key Features Demonstrated"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Zod Schema Validation:"})," Type-safe validation with detailed error messages"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Custom Test Functions:"})," Business logic validation (inventory, pricing)"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Real-time Validation:"})," Immediate feedback on user interactions"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Complex State Management:"})," Cart items, totals, discounts, shipping"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Error Handling:"})," Graceful handling of validation failures"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Transaction Safety:"})," Atomic operations for cart modifications"]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Live Demo"}),e.jsx(l,{mb:4,color:"gray.600",children:"Try adding items to the cart, modifying quantities, and applying discounts. Notice how validation provides immediate feedback and prevents invalid states."}),e.jsx(Mn,{})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Validation Strategy"}),e.jsxs(le,{status:"info",mb:4,children:[e.jsx(de,{}),"This example demonstrates layered validation: schema validation for data types and custom tests for business rules."]}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Schema Validation (Zod)"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Ensures data types, required fields, and basic constraints are met. Provides detailed error messages for each field."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Business Logic Tests"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Custom validation functions that check inventory availability, pricing rules, discount eligibility, and shipping constraints."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Real-time Feedback"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Validation runs on every state change, providing immediate feedback without waiting for form submission."})]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Schema & Validation"}),e.jsx(se,{language:"typescript",title:"Zod Schema Definition",children:`import { z } from 'zod';

const CartItemSchema = z.object({
  id: z.string().min(1, 'Product ID is required'),
  name: z.string().min(1, 'Product name is required'),
  price: z.number().positive('Price must be positive'),
  quantity: z.number().int().positive('Quantity must be a positive integer'),
  category: z.enum(['electronics', 'clothing', 'books', 'home']),
});

const ShoppingCartSchema = z.object({
  items: z.array(CartItemSchema),
  subtotal: z.number().nonnegative('Subtotal cannot be negative'),
  tax: z.number().nonnegative('Tax cannot be negative'),
  shipping: z.number().nonnegative('Shipping cannot be negative'),
  discount: z.number().nonnegative('Discount cannot be negative'),
  total: z.number().nonnegative('Total cannot be negative'),
  couponCode: z.string().optional(),
});

// Custom business logic tests
const cartTests = [
  (cart: CartState) => {
    // Check inventory availability
    const outOfStock = cart.items.find(item => 
      getInventory(item.id) < item.quantity
    );
    if (outOfStock) {
      return \`\${outOfStock.name} is out of stock\`;
    }
    return null;
  },
  
  (cart: CartState) => {
    // Validate discount eligibility
    if (cart.discount > 0 && cart.subtotal < 50) {
      return 'Minimum order of $50 required for discounts';
    }
    return null;
  },
  
  (cart: CartState) => {
    // Check maximum cart size
    if (cart.items.length > 20) {
      return 'Maximum 20 items allowed in cart';
    }
    return null;
  }
];`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Store Actions"}),e.jsx(se,{language:"typescript",title:"Cart Management Actions",children:`const createShoppingCartStore = () => new Forest<CartState>({
  name: 'shopping-cart',
  value: initialCartState,
  schema: ShoppingCartSchema,
  tests: cartTests,
  
  actions: {
    // Add item with validation
    addItem: function(value: CartState, product: Product) {
      const existingItem = value.items.find(item => item.id === product.id);
      
      if (existingItem) {
        this.$.updateQuantity(product.id, existingItem.quantity + 1);
      } else {
        const newItem: CartItem = {
          id: product.id,
          name: product.name,
          price: product.price,
          quantity: 1,
          category: product.category,
        };
        
        this.mutate(draft => {
          draft.items.push(newItem);
        });
        this.$.recalculateTotal();
      }
    },
    
    // Update quantity with validation
    updateQuantity: function(value: CartState, productId: string, quantity: number) {
      if (quantity <= 0) {
        this.$.removeItem(productId);
        return;
      }
      
      this.mutate(draft => {
        const item = draft.items.find(item => item.id === productId);
        if (item) {
          item.quantity = quantity;
        }
      });
      this.$.recalculateTotal();
    },
    
    // Apply coupon with validation
    applyCoupon: function(value: CartState, couponCode: string) {
      const coupon = validateCoupon(couponCode, value.subtotal);
      if (!coupon.valid) {
        throw new Error(coupon.error);
      }
      
      this.mutate(draft => {
        draft.couponCode = couponCode;
        draft.discount = coupon.discount;
      });
      this.$.recalculateTotal();
    },
    
    // Recalculate totals
    recalculateTotal: function(value: CartState) {
      const subtotal = value.items.reduce((sum, item) => 
        sum + (item.price * item.quantity), 0
      );
      
      const tax = subtotal * 0.08; // 8% tax
      const shipping = subtotal > 100 ? 0 : 9.99; // Free shipping over $100
      const total = subtotal + tax + shipping - value.discount;
      
      this.mutate(draft => {
        draft.subtotal = subtotal;
        draft.tax = tax;
        draft.shipping = shipping;
        draft.total = Math.max(0, total);
      });
    },
    
    // Checkout with transaction
    checkout: function(value: CartState) {
      return this.transact({
        suspendValidation: false, // Keep validation active
        action() {
          // Validate final state
          const validation = this.validate(this.value);
          if (!validation.isValid) {
            throw new Error(\`Checkout failed: \${validation.error}\`);
          }
          
          // Process payment, update inventory, etc.
          this.$.processPayment();
          this.$.updateInventory();
          this.$.clearCart();
        }
      });
    }
  }
});`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Validation Best Practices"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Layered Validation:"})," Use schema for data types, tests for business logic"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Immediate Feedback:"})," Validate on every state change for better UX"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Detailed Error Messages:"})," Provide specific, actionable error information"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Transaction Safety:"})," Use transactions for multi-step operations"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Graceful Degradation:"})," Handle validation failures without breaking the UI"]})]})]})]})}),gc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{layerStyle:"section",spacing:8,children:[e.jsxs(d,{textAlign:"center",children:[e.jsxs(p,{size:"xl",mb:4,children:["Advanced Form Validation",e.jsx(S,{ml:3,colorScheme:"blue",children:"Form Patterns"})]}),e.jsx(l,{fontSize:"lg",color:"gray.600",maxW:"2xl",children:"A comprehensive form validation example demonstrating field-level validation, cross-field dependencies, async validation, and error handling patterns."})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Key Features Demonstrated"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Field-Level Validation:"})," Individual field validation with specific error messages"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Cross-Field Dependencies:"})," Password confirmation, conditional required fields"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Async Validation:"})," Username availability, email verification"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Dynamic Validation Rules:"})," Rules that change based on other field values"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Error State Management:"})," Field-specific error display and clearing"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Form Submission Flow:"})," Validation before submission with loading states"]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Live Demo"}),e.jsx(l,{mb:4,color:"gray.600",children:"Try filling out the form below. Notice how validation provides immediate feedback, handles async operations, and manages complex field dependencies."}),e.jsx(Vn,{})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Validation Architecture"}),e.jsxs(le,{status:"info",mb:4,children:[e.jsx(de,{}),"This example demonstrates a multi-layered validation approach with field-level, form-level, and async validation patterns."]}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Field-Level Validation"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Each field has its own validation rules that run immediately on change, providing instant feedback to users."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Cross-Field Dependencies"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Some fields depend on others (password confirmation, conditional requirements) and are validated whenever dependent fields change."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Async Validation"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Username and email fields perform server-side validation to check availability and validity, with proper loading states and error handling."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Form-Level Validation"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Overall form validation ensures all fields are valid before allowing submission, with comprehensive error reporting."})]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Validation Schema"}),e.jsx(Y,{snippetName:"UserRegistrationSchema",language:"typescript",title:"Form Schema with Complex Rules"})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Store Implementation"}),e.jsx(Y,{snippetName:"formValidationStoreFactory",language:"typescript",title:"Form Store with Advanced Validation"})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Form Validation Best Practices"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Immediate Feedback:"})," Validate fields as users type for better UX"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Progressive Enhancement:"})," Start with basic validation, add async checks"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Clear Error Messages:"})," Provide specific, actionable error information"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Loading States:"})," Show progress during async validation and submission"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Accessibility:"})," Proper ARIA labels and error associations"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Error Recovery:"})," Allow users to easily correct and retry"]})]})]})]})}),fc=()=>e.jsx(te,{maxW:"container.xl",py:8,children:e.jsxs(w,{layerStyle:"section",spacing:8,children:[e.jsxs(d,{textAlign:"center",children:[e.jsxs(p,{size:"xl",mb:4,children:["Transaction System Example",e.jsx(S,{ml:3,colorScheme:"orange",children:"Advanced Pattern"})]}),e.jsx(l,{fontSize:"lg",color:"gray.600",maxW:"2xl",children:"A comprehensive example demonstrating Forestry 4's transaction system for atomic operations, rollback capabilities, and complex state management scenarios."})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Key Features Demonstrated"}),e.jsxs(K,{spacing:2,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Atomic Operations:"})," Multi-step operations that succeed or fail as a unit"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Automatic Rollback:"})," State restoration when transactions fail"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Validation Control:"})," Suspend/resume validation during transactions"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Nested Transactions:"})," Complex operations with multiple transaction levels"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Error Handling:"})," Graceful failure handling with detailed error information"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Performance Optimization:"})," Batch operations for better performance"]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Transaction Concepts"}),e.jsxs(le,{status:"info",mb:4,children:[e.jsx(de,{}),"Transactions ensure data consistency by treating multiple operations as a single, atomic unit that either completes entirely or rolls back completely."]}),e.jsxs(w,{spacing:4,align:"stretch",children:[e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Atomicity"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"All operations within a transaction succeed together or fail together. No partial updates are left in an inconsistent state."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Rollback Safety"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"If any operation fails, the entire transaction is rolled back to the original state before the transaction began."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Validation Control"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Validation can be suspended during transactions to allow intermediate invalid states, then resumed for final validation."})]}),e.jsxs(d,{children:[e.jsx(p,{size:"sm",mb:2,children:"Performance Benefits"}),e.jsx(l,{fontSize:"sm",color:"gray.600",children:"Batch multiple operations together to reduce validation overhead and improve performance for complex state changes."})]})]})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Basic Transaction Pattern"}),e.jsx(se,{language:"typescript",title:"Simple Transaction Example",children:`// Basic transaction for atomic operations
const transferFunds = function(value: BankState, fromAccount: string, toAccount: string, amount: number) {
  return this.transact({
    suspendValidation: true, // Allow intermediate invalid states
    action() {
      // Step 1: Withdraw from source account
      const fromBalance = this.value.accounts[fromAccount];
      if (fromBalance < amount) {
        throw new Error('Insufficient funds');
      }
      this.set(\`accounts.\${fromAccount}\`, fromBalance - amount);
      
      // Step 2: Deposit to destination account
      const toBalance = this.value.accounts[toAccount];
      this.set(\`accounts.\${toAccount}\`, toBalance + amount);
      
      // Step 3: Record transaction
      this.mutate(draft => {
        draft.transactions.push({
          id: Date.now(),
          from: fromAccount,
          to: toAccount,
          amount,
          timestamp: new Date(),
        });
      });
      
      // Final validation will run here automatically
      // If validation fails, entire transaction rolls back
    }
  });
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Complex Transaction Example"}),e.jsx(Y,{snippetName:"transaction-examples.ts",language:"typescript",title:"Advanced Transaction Patterns"})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Nested Transactions"}),e.jsx(se,{language:"typescript",title:"Nested Transaction Pattern",children:`// Nested transactions for complex operations
const processOrder = function(value: OrderState, order: Order) {
  return this.transact({
    suspendValidation: false, // Keep validation active
    action() {
      // Outer transaction: Process entire order
      
      // Step 1: Validate inventory (inner transaction)
      this.transact({
        suspendValidation: true,
        action() {
          for (const item of order.items) {
            const inventory = this.value.inventory[item.productId];
            if (inventory < item.quantity) {
              throw new Error(\`Insufficient inventory for \${item.name}\`);
            }
            // Reserve inventory
            this.set(\`inventory.\${item.productId}\`, inventory - item.quantity);
          }
        }
      });
      
      // Step 2: Process payment (inner transaction)
      this.transact({
        suspendValidation: true,
        action() {
          const paymentResult = this.$.processPayment(order.payment);
          if (!paymentResult.success) {
            throw new Error(\`Payment failed: \${paymentResult.error}\`);
          }
          this.set('paymentStatus', 'completed');
        }
      });
      
      // Step 3: Update order status
      this.mutate(draft => {
        draft.orders[order.id] = {
          ...order,
          status: 'confirmed',
          processedAt: new Date(),
        };
      });
      
      // Step 4: Send confirmation
      this.$.sendOrderConfirmation(order.id);
    }
  });
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Error Handling & Recovery"}),e.jsx(se,{language:"typescript",title:"Transaction Error Handling",children:`// Comprehensive error handling in transactions
const safeDataMigration = function(value: DataState, migrationPlan: MigrationPlan) {
  return this.transact({
    suspendValidation: true,
    action() {
      try {
        // Create backup before migration
        const backup = JSON.parse(JSON.stringify(this.value));
        this.set('_backup', backup);
        
        // Step 1: Validate migration plan
        const validation = validateMigrationPlan(migrationPlan);
        if (!validation.isValid) {
          throw new Error(\`Invalid migration plan: \${validation.errors.join(', ')}\`);
        }
        
        // Step 2: Apply schema changes
        for (const change of migrationPlan.schemaChanges) {
          this.$.applySchemaChange(change);
        }
        
        // Step 3: Migrate data
        for (const transformation of migrationPlan.dataTransformations) {
          this.$.applyDataTransformation(transformation);
        }
        
        // Step 4: Validate final state
        const finalValidation = this.validate(this.value);
        if (!finalValidation.isValid) {
          throw new Error(\`Migration resulted in invalid state: \${finalValidation.error}\`);
        }
        
        // Success - remove backup
        this.set('_backup', null);
        this.set('migrationStatus', 'completed');
        
      } catch (error) {
        // Transaction will automatically rollback
        // Log error for debugging
        console.error('Migration failed:', error);
        
        // Set error state (this will be rolled back too if we throw)
        this.set('migrationError', error.message);
        
        // Re-throw to trigger rollback
        throw error;
      }
    }
  }).catch(error => {
    // Handle post-rollback cleanup
    this.set('migrationStatus', 'failed');
    this.set('lastError', error.message);
    
    // Optionally restore from backup
    if (this.value._backup) {
      this.$.restoreFromBackup();
    }
    
    throw error; // Re-throw for caller
  });
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Performance Optimization"}),e.jsx(se,{language:"typescript",title:"Batch Operations with Transactions",children:`// Batch operations for better performance
const batchUpdateUsers = function(value: UserState, updates: UserUpdate[]) {
  return this.transact({
    suspendValidation: true, // Skip validation for each individual update
    action() {
      // Process all updates in a single transaction
      for (const update of updates) {
        const user = this.value.users[update.userId];
        if (!user) {
          throw new Error(\`User \${update.userId} not found\`);
        }
        
        // Apply update
        this.mutate(draft => {
          Object.assign(draft.users[update.userId], update.changes);
        });
      }
      
      // Update metadata
      this.mutate(draft => {
        draft.lastBatchUpdate = new Date();
        draft.batchUpdateCount = (draft.batchUpdateCount || 0) + 1;
      });
      
      // Validation runs once at the end for all changes
    }
  });
};

// Bulk data import with progress tracking
const importData = function(value: ImportState, data: ImportData[]) {
  return this.transact({
    suspendValidation: true,
    action() {
      const total = data.length;
      let processed = 0;
      
      for (const item of data) {
        try {
          // Process individual item
          this.$.processImportItem(item);
          processed++;
          
          // Update progress (but don't trigger validation yet)
          this.set('importProgress', {
            processed,
            total,
            percentage: Math.round((processed / total) * 100)
          });
          
        } catch (error) {
          // Add to error list but continue processing
          this.mutate(draft => {
            if (!draft.importErrors) draft.importErrors = [];
            draft.importErrors.push({
              item: item.id,
              error: error.message
            });
          });
        }
      }
      
      // Final validation and cleanup
      this.set('importStatus', 'completed');
      this.set('importCompletedAt', new Date());
    }
  });
};`})]}),e.jsxs(d,{layerStyle:"methodCard",w:"full",children:[e.jsx(p,{size:"md",mb:4,children:"Transaction Best Practices"}),e.jsxs(K,{spacing:3,children:[e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Use for Multi-Step Operations:"})," Any operation that requires multiple state changes"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Suspend Validation Wisely:"})," Suspend for intermediate states, validate at the end"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Handle Errors Gracefully:"})," Provide meaningful error messages and recovery options"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Keep Transactions Focused:"})," Don't make transactions too large or complex"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Test Rollback Scenarios:"})," Ensure your error handling and rollback logic works"]}),e.jsxs(x,{children:[e.jsx(v,{as:T,color:"green.500"}),e.jsx("strong",{children:"Use for Performance:"})," Batch operations to reduce validation overhead"]})]})]})]})});function xc(){return e.jsxs(d,{minH:"100vh",bg:"gray.50",children:[e.jsx($r,{}),e.jsx(d,{as:"main",pt:"80px",children:e.jsxs(ar,{children:[e.jsx(ee,{path:"/",element:e.jsx(Dr,{})}),e.jsx(ee,{path:"/why",element:e.jsx(Ur,{})}),e.jsx(ee,{path:"/store",element:e.jsx(Ka,{})}),e.jsx(ee,{path:"/actions",element:e.jsx(Xa,{})}),e.jsx(ee,{path:"/react",element:e.jsx(sc,{})}),e.jsx(ee,{path:"/validation",element:e.jsx(oc,{})}),e.jsx(ee,{path:"/schemas",element:e.jsx(ac,{})}),e.jsx(ee,{path:"/transactions",element:e.jsx(cc,{})}),e.jsx(ee,{path:"/rxjs",element:e.jsx(lc,{})}),e.jsx(ee,{path:"/advanced",element:e.jsx(dc,{})}),e.jsx(ee,{path:"/examples/todo-app",element:e.jsx(pc,{})}),e.jsx(ee,{path:"/examples/shopping-cart",element:e.jsx(mc,{})}),e.jsx(ee,{path:"/examples/form-validation",element:e.jsx(gc,{})}),e.jsx(ee,{path:"/examples/transaction-demo",element:e.jsx(fc,{})}),e.jsx(ee,{path:"/api",element:e.jsx(uc,{})}),e.jsx(ee,{path:"/examples",element:e.jsx(hc,{})})]})})]})}const jc=rr({colors:{brand:{50:"#e6f7ff",100:"#bae7ff",200:"#91d5ff",300:"#69c0ff",400:"#40a9ff",500:"#1890ff",600:"#096dd9",700:"#0050b3",800:"#003a8c",900:"#002766"},forest:{50:"#f0fff4",100:"#c6f6d5",200:"#9ae6b4",300:"#68d391",400:"#48bb78",500:"#38a169",600:"#2f855a",700:"#276749",800:"#22543d",900:"#1a202c"}},fonts:{heading:`'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif`,body:`'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif`,mono:"'JetBrains Mono', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace"},layerStyles:{card:{py:1,px:1,borderRadius:"md",mb:2},highlight:{p:3,borderRadius:"md"},section:{spacing:6,align:"stretch"},infoBox:{p:4,borderRadius:"md"},sidebar:{position:"fixed",left:0,top:0,h:"100vh",w:"280px",bg:"gray.50",borderRight:"1px",borderColor:"gray.200",overflowY:"auto",p:6,zIndex:10},mainContent:{ml:"280px",p:8,maxW:"none"},methodCard:{p:6,borderRadius:"lg",border:"1px",borderColor:"gray.200",mb:6,bg:"white",shadow:"sm"},codeExample:{p:4,bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",fontFamily:"mono",fontSize:"sm",overflowX:"auto"},methodSignature:{py:3,borderBottom:"1px solid",borderColor:"red.600",fontFamily:"mono",fontSize:"sm",fontWeight:"semibold",color:"gray.800",display:"block"},navLink:{display:"block",py:2,px:3,borderRadius:"md",fontSize:"sm",color:"gray.700",textDecoration:"none",_hover:{bg:"gray.100",color:"brand.600"}}},textStyles:{body:{color:"gray.600",mb:4},description:{color:"gray.600",fontSize:"sm",mb:3},hero:{fontSize:"xl",color:"gray.600",maxW:"4xl",mx:"auto"}},components:{Button:{defaultProps:{colorScheme:"brand"}},Code:{baseStyle:{fontSize:"sm",fontFamily:"mono"}},Heading:{baseStyle:{fontWeight:"semibold"},sizes:{sm:{fontSize:"md",mb:2},md:{fontSize:"lg",mb:3},lg:{fontSize:"xl",mb:4}}}}});pr.createRoot(document.getElementById("root")).render(e.jsx(he.StrictMode,{children:e.jsx(sr,{theme:jc,toastOptions:{defaultOptions:{position:"top-right",duration:4e3}},children:e.jsx(cr,{children:e.jsx(xc,{})})})}));
