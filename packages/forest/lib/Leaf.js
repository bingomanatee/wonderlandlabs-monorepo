"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const walrus_1=require("@wonderlandlabs/walrus"),helpers_1=require("./helpers");class Leaf{branch;constructor(e,i,t){if(this.branch=e,this.name=t,"string"==typeof i&&(i={type:i}),!(0,helpers_1.isLeafConfig)(i))throw console.warn("bad leaf config",t,i),new Error("mis-configured leaf");this.config=i}name;config;get value(){return this.branch.get(this.name)}validate(){var e=this.value;if(!1!==this.config.required||null!=e){if(this.config.type){var i=walrus_1.type.describe(e,!0);if(i!==this.config.type&&!1!==this.config.strict)throw console.warn("with base",this.branch.value,this.name,"--- type issue; ",i,"is not a ",this.config.type),new Error("field"+this.name+" must be of type "+this.config.type)}this.config.validate&&this.config.validate(e,this)}}}exports.default=Leaf;